<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="dns-prefetch" href="http://lulustyle.net">
  <title>LULU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="我自风情万种，以码为生">
<meta name="keywords" content="前端,js,jquery,javascript,html5,开发者,程序猿,程序媛,极客,编程,代码,开源,IT网站,Developer,Programmer,Coder,Geek,html,css,css3,用户体验">
<meta property="og:type" content="website">
<meta property="og:title" content="LULU">
<meta property="og:url" content="http://lulustyle.net/page/4/index.html">
<meta property="og:site_name" content="LULU">
<meta property="og:description" content="我自风情万种，以码为生">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LULU">
<meta name="twitter:description" content="我自风情万种，以码为生">
  
    <link rel="alternative" href="/atom.xml" title="LULU" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" type="text/css" href="/./main.2d7529.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

</head>
</html>
<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #ffffff"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/avatar.jpg" class="js-avatar show">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">代码风情</a></h1>
		</hgroup>
		
		<p class="header-subtitle">我自风情万种，以码为生</p>
		


		






		<nav class="header-menu">
			<ul>
			
				<li><a href="/">首页</a></li>
	        
				<li><a href="/categories/program">前端工程化</a></li>
	        
				<li><a href="/categories/service">业务场景解决方案</a></li>
	        
				<li><a href="/categories/principle">底层原理及基础</a></li>
	        
				<li><a href="/categories/productt">产品项目思维</a></li>
	        
				<li><a href="https://www.yuque.com/lulu27753/notes">读书笔记</a></li>
	        
				<li><a href="https://www.yuque.com/lulu27753/lulu">语雀目录</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">搜索</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">作品及资源</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
		        
					<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="weixin" target="_blank" href="#" title="weixin"><i class="icon-weixin"></i></a>
		        
					<a class="jianshu" target="_blank" href="#" title="jianshu"><i class="icon-jianshu"></i></a>
		        
					<a class="mail" target="_blank" href="mailto:lulu27753@163.com" title="mail"><i class="icon-mail"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #ffffff"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">代码风情</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>我自风情万种，以码为生<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
				
			
				
			
				
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github"><i class="icon-github"></i></a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="weixin" target="_blank" href="#" title="weixin"><i class="icon-weixin"></i></a>
			        
						<a class="jianshu" target="_blank" href="#" title="jianshu"><i class="icon-jianshu"></i></a>
			        
						<a class="mail" target="_blank" href="mailto:lulu27753@163.com" title="mail"><i class="icon-mail"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 70%">
				
				
					<li style="width: 14.285714285714286%"><a href="/">首页</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/program">前端工程化</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/service">业务场景解决方案</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/principle">底层原理及基础</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="/categories/productt">产品项目思维</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="https://www.yuque.com/lulu27753/notes">读书笔记</a></li>
		        
					<li style="width: 14.285714285714286%"><a href="https://www.yuque.com/lulu27753/lulu">语雀目录</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-前后端分离" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/22/前后端分离/">前后端分离</a>
    </h1>
  

        
        <a href="/2018/12/22/前后端分离/" class="archive-article-date">
  	<time datetime="2018-12-22T01:59:50.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-22</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [组件]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 前端工程化</span></span></p>
<hr>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a><a name="3r0qpz"></a>前言</h1><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">前后端分离为什么出现？</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">本质上是什么？</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">前后端分离运动对 web 应用的架构带来了怎么样的变化？</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">前后端分离怎么分离？</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">为什么是 Node.js? </span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">前后端分离的未来怎样？</span></span></p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==∣=2651960501&amp;idx=1&amp;sn=a452bab31c0457063241df237f955332&amp;chksm=bd2d01698a5a887f9dfa5c6966d9e71bf492a040ab2dbe4e469ef38dd8ee5ab00b7c562a88e8&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">互联网分层架构，为啥要前后端分离？</a></p>
<h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a><a name="wtuzxm"></a>Why</h1><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">传统的后段服务支撑不了现代化的前端开发。平时工作中用到的工具链、开发框架、规范协议、浏览器等在不断涌现，这些新的技术在给开发环境、开发流程提了更多新需求。Node.js 在这个背景下能够把这些工具串联起来。</span></span></p>
<h1 id="How"><a href="#How" class="headerlink" title="How"></a><a name="rpqeku"></a>How</h1><h2 id="模板层的分工"><a href="#模板层的分工" class="headerlink" title="模板层的分工"></a><a name="524yga"></a><span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">模板层的分工</span></span></h2><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">最早的 Java 开发阶段需要一个包含所有内容的 war 包，整个前端的编排，像 HTML 页面、CSS、JS 很多时候包含在 HTML 页面，也会出现脚本复用、样式复用抽离出来。所以前端开发当时是围绕著名的 velocity 模版。这一层最大的问题是，后端的同学看前端资源像看天书，前端同学看后端模版也像是看天书，融合效率非常低。</span></span></p>
<h2 id="静态资源独立部署"><a href="#静态资源独立部署" class="headerlink" title="静态资源独立部署"></a><a name="tvbisb"></a><span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">静态资源独立部署</span></span></h2><p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545444668368-fc6fbb5d-67a6-4ceb-98f1-d0210e5fa6eb.png" alt="image.png | left | 447x375"></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">Web 前端体验最大的改进就是副客户端，客户端资源非常庞大，代码不再是直接发布到线上，而是要编译，做预处理，可能还要做 CDN 的加速。整个应用被分割成两部分，后端服务发布之后，前端服务要独立更新，这样就给应用的更新带来了便利。这里存在一个问题是接口的协调，前端的需求变更，数据的要求也会变化，需要后端去协调资源的编排。另外一个问题是测试，前端持有脚本，样式资源，而模版却在应用层，应用层的开发、发布也是很复杂的。</span></span></p>
<h2 id="独立应用层（BFF）"><a href="#独立应用层（BFF）" class="headerlink" title="独立应用层（BFF）"></a><a name="254nhr"></a><span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">独立应用层（BFF）</span></span></h2><p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545446899571-268627b3-3977-4e7f-9db0-321d5016829f.png" alt="image.png | left | 455x373"></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">Node.js 提供 mock 数据开始，前端代码的预编译，资源编排，这些动作都合并到一个应用里面，前端形成 UI 应用层。在这一层，前端具备了更灵活、强大的能力，在数据编排这一层，Node.js 可以做轻量的粘合，服务端的开发也在往微服务方向发展，提升了开发效率。</span></span></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">后端相关的接口回退到 API，或者云端。</span></span></p>
<h1 id="BFF-层"><a href="#BFF-层" class="headerlink" title="BFF 层"></a><a name="exn8un"></a>BFF 层</h1><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)"><strong>业务层</strong></span></span><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">的需求很多，在流程控制、数据转换、数据安全、分析展现等方面需要有大量的组件沉淀。最大的特点是有众多独立的功能模块。</span></span></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">在 </span></span><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)"><strong>server 层</strong></span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">Babeljs 可以做代码转换的事情，</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">Bigpipe 可以优化服务端的内存，可以缩减渲染时间，提升体验优化。</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">在数据流里可以有很多的 filter，给数据链中插入 processor，来定义处理微小的数据。</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">用户在原始的数据到完整的可视化展现不需要再搭建一个产品去支持，只需要搭几个 filter，配几个数据源，拖几个组件就可以完成。</span></span></p>
<h2 id="定制应用框架"><a href="#定制应用框架" class="headerlink" title="定制应用框架"></a><a name="l16naz"></a><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">定制应用框架</span></span></h2><p>通过“定制应用框架”<span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">解决前端的编译，工程管理，数据 mock 等问题</span></span></p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545448520556-a886b66c-dd05-471a-8528-fde5240db11b.png" alt="image.png | left | 345x281"></p>
<h2 id="微应用分割"><a href="#微应用分割" class="headerlink" title="微应用分割"></a><a name="d5qots"></a><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">微应用分割</span></span></h2><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">把各自独立的模块应用切割成微应用，一个微应用解决一个问题，便于分工和隔离处理。</span></span></p>
<p>具体做法是微服务拆分，搭建微应用服务，承载大量的小服务，同时也会出现很多域名的问题，很多访问入口。这里做了一些小创新，在入口可以定义端口，sever name，访问 path，当把一个场景分成 10 个应用发布，发布之后再根据不同的路径拼接成一个应用，对体验没有影响。</p>
<p>除了路由自动化规划之后，对应用的发布做到上下平滑，不会影响流量。前端人员自己打包发布就可以了。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545453438728-45702fb8-f2ec-4909-8158-1bb9d89c4515.png" alt="image.png | left | 736x217"></p>
<h2 id="运维工程化"><a href="#运维工程化" class="headerlink" title="运维工程化"></a><a name="berygo"></a><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">运维工程化</span></span></h2><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">当这些应用被分割的很细致之后，随之而来的是如何管理这些小应用。</span></span></p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545453583047-a8edd4e3-529d-490e-9cfc-bbdf555ed5b6.png" alt="image.png | left | 413x321"></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">比如有两台机器做互备，把所有小 App 都发布到上面之后，由一个个小颗粒组成一个大应用，看上去很像一个蜂巢，因此命名 honeycomb，这些蜂巢组成一个大蜂窝，完成一个主功能。在应用推进过程中，有些应用压力大，需要把应用集群隔离开，把有不同业务需求场景环境，例如开发环境、预发环境、线上环境隔离开来，不同环境配置的集群资源和机器数量都不一样。随着业务发展，隔离的事情会交给容器去执行。</span></span></p>
<h1 id="密集计算问题"><a href="#密集计算问题" class="headerlink" title="密集计算问题"></a><a name="iip7pi"></a>密集计算问题</h1><p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">密集计算分成两层，</span></span><br>第一层<span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">绿色部分会接收用户请求，</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">第二层浅蓝色会处理用户请求，写很多的 processor，提供大量的进程去提供密集计算。</span></span></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">主要问题在于 CPU 容量是恒定的，当有很多并发请求的时候，如何保证在服务层去很好的分配计算任务。</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">拆成两层之后，保证用户请求不会被 block 掉。</span></span><br><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">如果第一层大量的密集计算，会导致用户的请求或者连接的需求被挡住，接收不到响应，所以要往后堆，做成队列，可扩容的大集群。整个结果在 Java 里就可以理解为 Java 庞大线程的处理过程。</span></span></p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545459366584-04df277c-f03c-4967-9c2e-79a8065dd379.png" alt="image.png | left | 747x227"></p>
<p><span data-type="color" style="color:rgb(74, 74, 74)"><span data-type="background" style="background-color:rgb(255, 255, 255)">社区里在线程库里还有一些尝试，Napa.js 是微软开源的线程库，前端同构的需求可以探索使用 Napa.js 这个工具。</span></span></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/前端工程化/" class="article-tag-list-link color1">前端工程化</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/22/前后端分离/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-前端业务代码工具库" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/22/前端业务代码工具库/">前端业务代码工具库</a>
    </h1>
  

        
        <a href="/2018/12/22/前端业务代码工具库/" class="archive-article-date">
  	<time datetime="2018-12-22T01:47:14.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-22</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <h1 id="outils"><a href="#outils" class="headerlink" title="outils"></a><a name="hsyhio"></a>outils</h1><p>[</p>
<p><img src="https://www.npmjs.com/package/outils" alt="npm | left](https://img.shields.io/npm/v/outils.svg &quot;&quot;)
"></p>
<p><img src="https://travis-ci.org/proYang/outils.svg?branch=master" alt="Build Status | left"></p>
<p>[</p>
<p><img src="https://coveralls.io/repos/github/proYang/outils/badge.svg?branch=master" alt="Coverage | left"></p>
<p><img src="https://www.npmjs.com/package/outils" alt="LICENSE MIT | left](https://img.shields.io/npm/l/outils.svg &quot;&quot;)
"></p>
<p>前端业务代码工具库</p>
<blockquote>
<p>目的：高效率完成前端业务代码</p>
</blockquote>
<p>业务开发过程中，会经常用到<code>日期格式化</code>、<code>url参数转对象</code>、<code>浏览器类型判断</code>、<code>节流函数</code>等常用函数，为避免不同项目多次复制粘贴的麻烦，这里统一封装，并发布到npm，以提高开发效率。如果你也有常用的代码，欢迎为本项目提交pr。</p>
<h2 id="安装使用"><a href="#安装使用" class="headerlink" title="安装使用"></a><a name="sf29au"></a>安装使用</h2><ol>
<li>直接下载<code>min</code>目录下的<a href="https://github.com/proYang/outils/blob/master/min/outils.min.js" target="_blank" rel="noopener">outils.min.js</a>使用，支持UMD通用模块规范</li>
<li>使用npm安装</li>
</ol>
<h3 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器:"></a><a name="wh84ao"></a>浏览器:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;outils.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    var OS = outils.getOS()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="npm"><a href="#npm" class="headerlink" title="npm:"></a><a name="vd6vka"></a>npm:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save-dev outils</span><br></pre></td></tr></table></figure>
<p>webpack、RequireJS、SeaJS等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 完整引入</span><br><span class="line">const outils = require(&apos;outils&apos;)</span><br><span class="line">const OS = outils.getOS()</span><br></pre></td></tr></table></figure>
<p><strong>推荐使用方法</strong></p>
<p>你真的不需要完整引入所有函数，所以只引入需要使用的方法即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 只引入部分方法(&apos;outils/&lt;方法名&gt;&apos;)</span><br><span class="line">const getOS = require(&apos;outils/getOS&apos;)</span><br><span class="line">const OS = getOS()</span><br></pre></td></tr></table></figure></p>
<h2 id="API文档"><a href="#API文档" class="headerlink" title="API文档"></a><a name="y77ozs"></a>API文档</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a><a name="otazcz"></a>Array</h3><h4 id="arrayEqual-判断两个数组是否相等"><a href="#arrayEqual-判断两个数组是否相等" class="headerlink" title="arrayEqual  判断两个数组是否相等"></a><a name="06fglt"></a><a href="https://github.com/proYang/outils/blob/master/src/array/arrayEqual.js" target="_blank" rel="noopener">arrayEqual</a>  判断两个数组是否相等</h4><h3 id="Class"><a href="#Class" class="headerlink" title="Class"></a><a name="2bfeuw"></a>Class</h3><h4 id="addClass-为元素添加class"><a href="#addClass-为元素添加class" class="headerlink" title="addClass  为元素添加class"></a><a name="f26svt"></a><a href="https://github.com/proYang/outils/blob/master/src/class/addClass.js" target="_blank" rel="noopener">addClass</a>  为元素添加class</h4><h4 id="hasClass-判断元素是否有某个class"><a href="#hasClass-判断元素是否有某个class" class="headerlink" title="hasClass  判断元素是否有某个class"></a><a name="pbgqlz"></a><a href="https://github.com/proYang/outils/blob/master/src/class/hasClass.js" target="_blank" rel="noopener">hasClass</a>  判断元素是否有某个class</h4><h4 id="removeClass-为元素移除class"><a href="#removeClass-为元素移除class" class="headerlink" title="removeClass  为元素移除class"></a><a name="4speny"></a><a href="https://github.com/proYang/outils/blob/master/src/class/removeClass.js" target="_blank" rel="noopener">removeClass</a>  为元素移除class</h4><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a><a name="vnzxvf"></a>Cookie</h3><h4 id="getCookie-根据name读取Cookie"><a href="#getCookie-根据name读取Cookie" class="headerlink" title="getCookie  根据name读取Cookie"></a><a name="zcv8eo"></a><a href="https://github.com/proYang/outils/blob/master/src/cookie/getCookie.js" target="_blank" rel="noopener">getCookie</a>  根据name读取Cookie</h4><h4 id="removeCookie-根据name删除Cookie"><a href="#removeCookie-根据name删除Cookie" class="headerlink" title="removeCookie  根据name删除Cookie"></a><a name="nr6xin"></a><a href="https://github.com/proYang/outils/blob/master/src/cookie/removeCookie.js" target="_blank" rel="noopener">removeCookie</a>  根据name删除Cookie</h4><h4 id="setCookie-添加Cookie"><a href="#setCookie-添加Cookie" class="headerlink" title="setCookie  添加Cookie"></a><a name="twvvgn"></a><a href="https://github.com/proYang/outils/blob/master/src/cookie/setCookie.js" target="_blank" rel="noopener">setCookie</a>  添加Cookie</h4><h3 id="Device"><a href="#Device" class="headerlink" title="Device"></a><a name="q21dgh"></a>Device</h3><h4 id="getExplore-获取浏览器类型和版本号"><a href="#getExplore-获取浏览器类型和版本号" class="headerlink" title="getExplore  获取浏览器类型和版本号"></a><a name="eqptxq"></a><a href="https://github.com/proYang/outils/blob/master/src/device/getExplore.js" target="_blank" rel="noopener">getExplore</a>  获取浏览器类型和版本号</h4><h4 id="getOS-获取操作系统类型"><a href="#getOS-获取操作系统类型" class="headerlink" title="getOS  获取操作系统类型"></a><a name="fvr1fg"></a><a href="https://github.com/proYang/outils/blob/master/src/device/getOS.js" target="_blank" rel="noopener">getOS</a>  获取操作系统类型</h4><h3 id="Dom"><a href="#Dom" class="headerlink" title="Dom"></a><a name="zymrgy"></a>Dom</h3><h4 id="getScrollTop-获取滚动条距顶部的距离"><a href="#getScrollTop-获取滚动条距顶部的距离" class="headerlink" title="getScrollTop  获取滚动条距顶部的距离"></a><a name="n3tweo"></a><a href="https://github.com/proYang/outils/blob/master/src/dom/getScrollTop.js" target="_blank" rel="noopener">getScrollTop</a>  获取滚动条距顶部的距离</h4><h4 id="offset-获取一个元素的距离文档-document-的位置，类似jQ中的offset"><a href="#offset-获取一个元素的距离文档-document-的位置，类似jQ中的offset" class="headerlink" title="offset  获取一个元素的距离文档(document)的位置，类似jQ中的offset()"></a><a name="1yzxpe"></a><a href="https://github.com/proYang/outils/blob/master/src/dom/offset.js" target="_blank" rel="noopener">offset</a>  获取一个元素的距离文档(document)的位置，类似jQ中的offset()</h4><h4 id="scrollTo-在-duration-时间内，滚动条平滑滚动到-to-指定位置"><a href="#scrollTo-在-duration-时间内，滚动条平滑滚动到-to-指定位置" class="headerlink" title="scrollTo  在\${duration}时间内，滚动条平滑滚动到\${to}指定位置"></a><a name="s09snc"></a><a href="https://github.com/proYang/outils/blob/master/src/dom/scrollTo.js" target="_blank" rel="noopener">scrollTo</a>  在\${duration}时间内，滚动条平滑滚动到\${to}指定位置</h4><h4 id="setScrollTop-设置滚动条距顶部的距离"><a href="#setScrollTop-设置滚动条距顶部的距离" class="headerlink" title="setScrollTop  设置滚动条距顶部的距离"></a><a name="7k23pp"></a><a href="https://github.com/proYang/outils/blob/master/src/dom/setScrollTop.js" target="_blank" rel="noopener">setScrollTop</a>  设置滚动条距顶部的距离</h4><h4 id="windowResize-H5软键盘缩回、弹起回调"><a href="#windowResize-H5软键盘缩回、弹起回调" class="headerlink" title="windowResize  H5软键盘缩回、弹起回调"></a><a name="9707bu"></a><a href="https://github.com/proYang/outils/blob/master/src/dom/windowResize.js" target="_blank" rel="noopener">windowResize</a>  H5软键盘缩回、弹起回调</h4><h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a><a name="3vy6fk"></a>Function</h3><h4 id="debounce-函数防抖"><a href="#debounce-函数防抖" class="headerlink" title="debounce  函数防抖"></a><a name="gicwvz"></a><a href="https://github.com/proYang/outils/blob/master/src/function/debounce.js" target="_blank" rel="noopener">debounce</a>  函数防抖</h4><h4 id="throttle-函数节流"><a href="#throttle-函数节流" class="headerlink" title="throttle  函数节流"></a><a name="v1clei"></a><a href="https://github.com/proYang/outils/blob/master/src/function/throttle.js" target="_blank" rel="noopener">throttle</a>  函数节流</h4><h3 id="Keycode"><a href="#Keycode" class="headerlink" title="Keycode"></a><a name="gnhpni"></a>Keycode</h3><h4 id="getKeyName-根据keycode获得键名"><a href="#getKeyName-根据keycode获得键名" class="headerlink" title="getKeyName  根据keycode获得键名"></a><a name="2zkxsc"></a><a href="https://github.com/proYang/outils/blob/master/src/keycode/getKeyName.js" target="_blank" rel="noopener">getKeyName</a>  根据keycode获得键名</h4><h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a><a name="a6zzqa"></a>Object</h3><h4 id="deepClone-深拷贝，支持常见类型"><a href="#deepClone-深拷贝，支持常见类型" class="headerlink" title="deepClone  深拷贝，支持常见类型"></a><a name="xfs1fn"></a><a href="https://github.com/proYang/outils/blob/master/src/object/deepClone.js" target="_blank" rel="noopener">deepClone</a>  深拷贝，支持常见类型</h4><h4 id="isEmptyObject-判断Object是否为空"><a href="#isEmptyObject-判断Object是否为空" class="headerlink" title="isEmptyObject  判断Object是否为空"></a><a name="notmko"></a><a href="https://github.com/proYang/outils/blob/master/src/object/isEmptyObject.js" target="_blank" rel="noopener">isEmptyObject</a>  判断Object是否为空</h4><h3 id="Random"><a href="#Random" class="headerlink" title="Random"></a><a name="a31wqn"></a>Random</h3><h4 id="randomColor-随机生成颜色"><a href="#randomColor-随机生成颜色" class="headerlink" title="randomColor   随机生成颜色"></a><a name="frr0qi"></a><a href="https://github.com/proYang/outils/blob/master/src/random/randomColor.js" target="_blank" rel="noopener">randomColor</a>   随机生成颜色</h4><h4 id="randomNum-生成指定范围随机数"><a href="#randomNum-生成指定范围随机数" class="headerlink" title="randomNum  生成指定范围随机数"></a><a name="obpmlo"></a><a href="https://github.com/proYang/outils/blob/master/src/random/randomNum.js" target="_blank" rel="noopener">randomNum</a>  生成指定范围随机数</h4><h3 id="Regexp"><a href="#Regexp" class="headerlink" title="Regexp"></a><a name="i92gwh"></a>Regexp</h3><h4 id="isEmail-判断是否为邮箱地址"><a href="#isEmail-判断是否为邮箱地址" class="headerlink" title="isEmail  判断是否为邮箱地址"></a><a name="alsddt"></a><a href="https://github.com/proYang/outils/blob/master/src/regexp/isEmail.js" target="_blank" rel="noopener">isEmail</a>  判断是否为邮箱地址</h4><h4 id="isIdCard-判断是否为身份证号"><a href="#isIdCard-判断是否为身份证号" class="headerlink" title="isIdCard  判断是否为身份证号"></a><a name="gq37vg"></a><a href="https://github.com/proYang/outils/blob/master/src/regexp/isIdCard.js" target="_blank" rel="noopener">isIdCard</a>  判断是否为身份证号</h4><h4 id="isPhoneNum-判断是否为手机号"><a href="#isPhoneNum-判断是否为手机号" class="headerlink" title="isPhoneNum  判断是否为手机号"></a><a name="r4evcu"></a><a href="https://github.com/proYang/outils/blob/master/src/regexp/isPhoneNum.js" target="_blank" rel="noopener">isPhoneNum</a>  判断是否为手机号</h4><h4 id="isUrl-判断是否为URL地址"><a href="#isUrl-判断是否为URL地址" class="headerlink" title="isUrl  判断是否为URL地址"></a><a name="hoxigo"></a><a href="https://github.com/proYang/outils/blob/master/src/regexp/isUrl.js" target="_blank" rel="noopener">isUrl</a>  判断是否为URL地址</h4><h3 id="String"><a href="#String" class="headerlink" title="String"></a><a name="4wl5eo"></a>String</h3><h4 id="digitUppercase-现金额转大写"><a href="#digitUppercase-现金额转大写" class="headerlink" title="digitUppercase  现金额转大写"></a><a name="43argx"></a><a href="https://github.com/proYang/outils/blob/master/src/string/digitUppercase.js" target="_blank" rel="noopener">digitUppercase</a>  现金额转大写</h4><h3 id="Support"><a href="#Support" class="headerlink" title="Support"></a><a name="27ydty"></a>Support</h3><h4 id="isSupportWebP-判断浏览器是否支持webP格式图片"><a href="#isSupportWebP-判断浏览器是否支持webP格式图片" class="headerlink" title="isSupportWebP  判断浏览器是否支持webP格式图片"></a><a name="lmq2uo"></a><a href="https://github.com/proYang/outils/blob/master/src/support/isSupportWebP.js" target="_blank" rel="noopener">isSupportWebP</a>  判断浏览器是否支持webP格式图片</h4><h4 id=""><a href="#" class="headerlink" title=""></a><a name="d6y9du"></a></h4><h3 id="Time"><a href="#Time" class="headerlink" title="Time"></a><a name="fbb7ca"></a>Time</h3><h4 id="formatPassTime-格式化-startTime-距现在的已过时间"><a href="#formatPassTime-格式化-startTime-距现在的已过时间" class="headerlink" title="formatPassTime  格式化\${startTime}距现在的已过时间"></a><a name="mchvdy"></a><a href="https://github.com/proYang/outils/blob/master/src/time/formatPassTime.js" target="_blank" rel="noopener">formatPassTime</a>  格式化\${startTime}距现在的已过时间</h4><h4 id="formatRemainTime-格式化现在距-endTime-的剩余时间"><a href="#formatRemainTime-格式化现在距-endTime-的剩余时间" class="headerlink" title="formatRemainTime  格式化现在距\${endTime}的剩余时间"></a><a name="rmo5nc"></a><a href="https://github.com/proYang/outils/blob/master/src/time/formatRemainTime.js" target="_blank" rel="noopener">formatRemainTime</a>  格式化现在距\${endTime}的剩余时间</h4><h3 id="Url"><a href="#Url" class="headerlink" title="Url"></a><a name="5sx1ve"></a>Url</h3><h4 id="parseQueryString-url参数转对象"><a href="#parseQueryString-url参数转对象" class="headerlink" title="parseQueryString  url参数转对象"></a><a name="l2nakz"></a><a href="https://github.com/proYang/outils/blob/master/src/url/parseQueryString.js" target="_blank" rel="noopener">parseQueryString</a>  url参数转对象</h4><h4 id="stringfyQueryString-对象序列化"><a href="#stringfyQueryString-对象序列化" class="headerlink" title="stringfyQueryString  对象序列化"></a><a name="1985tz"></a><a href="https://github.com/proYang/outils/blob/master/src/url/stringfyQueryString.js" target="_blank" rel="noopener">stringfyQueryString</a>  对象序列化</h4>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/22/前端业务代码工具库/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-前端工程师必备技能图谱" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/前端工程师必备技能图谱/">前端工程师必备技能图谱</a>
    </h1>
  

        
        <a href="/2018/12/21/前端工程师必备技能图谱/" class="archive-article-date">
  	<time datetime="2018-12-21T12:47:27.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [组件]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 底层原理及基础</span></span></p>
<hr>
<p><img src="https://cdn.nlark.com/yuque/0/2018/jpeg/84728/1545396465644-e341222c-1908-4962-8fcd-73762e2d8527.jpeg" alt="前端工程师必备技能图谱.jpg | center | 747x926"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/底层原理及基础/" class="article-tag-list-link color3">底层原理及基础</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/前端工程师必备技能图谱/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-如何管理好10万行代码的前端单页面应用" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/如何管理好10万行代码的前端单页面应用/">如何管理好10万行代码的前端单页面应用</a>
    </h1>
  

        
        <a href="/2018/12/21/如何管理好10万行代码的前端单页面应用/" class="archive-article-date">
  	<time datetime="2018-12-21T12:41:56.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [Hexo]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 教程</span></span></p>
<hr>
<h2 id="ToB产品特点"><a href="#ToB产品特点" class="headerlink" title="ToB产品特点"></a><a name="bghehy"></a>ToB产品特点</h2><ul>
<li>业务复杂度高、业务理解门槛高；</li>
<li>前端代码量巨大</li>
</ul>
<h2 id="架构方案"><a href="#架构方案" class="headerlink" title="架构方案"></a><a name="dwbzqa"></a>架构方案</h2><p>架构的目的是管理复杂度，将复杂问题分而治之、有效管理</p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545396334512-3ff6e40c-40b2-4056-9da7-6ea0480283fc.png" alt="业务逻辑架构.png | center | 747x474"></p>
<ul>
<li>通过路由切割“页面级”粒度的功能模块</li>
<li>同一“页面”内的模块再划分<ul>
<li>纵向：通过业务功能（可根据视图模块判断）划分</li>
<li>横向：通过Model-View-Controller三种不同职能划分</li>
</ul>
</li>
<li>合并同类项：细分粒度，将可复用模块或组件抽离到公共区域<ul>
<li>数据模型：<ul>
<li>Domain Model 领域模型：详见ORM层</li>
<li>App State Modal 应用状态模型：详见应用状态模型</li>
</ul>
</li>
<li>UI组件：<ul>
<li>Container Component： 详见容器型组件</li>
<li>Presentational Component：详见展示型组件</li>
</ul>
</li>
<li>公共服务：<ul>
<li>所有的HTTP请求放在一起统一管理</li>
<li>日志服务、本地存储服务、错误监控、Mock服务等统一存放在公共服务层；</li>
</ul>
</li>
</ul>
</li>
<li>跨模块通信</li>
</ul>
<h2 id="合并同类项"><a href="#合并同类项" class="headerlink" title="合并同类项"></a><a name="o398vf"></a>合并同类项</h2><p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545396392278-44ace169-1fa7-42b8-a095-8602db1fdcc6.png" alt="合并同类项.png | center | 747x385"></p>
<h3 id="ORM层（Domain-Model-Layer）"><a href="#ORM层（Domain-Model-Layer）" class="headerlink" title="ORM层（Domain Model Layer）"></a><a name="1bx2ys"></a>ORM层（Domain Model Layer）</h3><p>持久化到数据库或localStorage中，属于可跨模块复用的公共业务数据<br>如：Users 用户信息 | Datasets 数据集信息 | Reports 报表信息</p>
<p>抽离该公共层的好处：</p>
<ul>
<li>跨模块数据同步问题不复存在：<br>  例如：之前Users对象在A和B两个业务模块中单独存储，A模块变更Users对象后，需将Users变更同步到B模块中，如不同步，A、B模块在界面上呈现的User信息不一致，下沉到领域模型层统一管理后，问题不复存在；</li>
<li>除领域模型复用外，还可复用领域模型相关的CRUD Reducer：<br>  例如：之前Users对象对应的Create Read Update Delete方法可能在A和B两个业务模块各维护一套，下沉到领域模型层统一管理后，减少了代码重复问题；</li>
<li>自然承担了部分跨模块通信职责：<br>  之前数据同步相关的跨模块通信代码没有了存在的必要性；</li>
</ul>
<h3 id="应用状态模型"><a href="#应用状态模型" class="headerlink" title="应用状态模型"></a><a name="pqc8gt"></a>应用状态模型</h3><p>应用状态模型是与视图相关的状态数据：这些数据与具体的视图模块或业务功能强相关，建议存放在业务模块的Model中。<br>如：</p>
<ul>
<li>当前页面选中了列表的第n行 currentSelectedRow: someId</li>
<li>窗口是否处于打开状态 isModalShow: false</li>
<li>某种视图元素是否在拖拽中 isDragging: true</li>
</ul>
<h3 id="容器型组件"><a href="#容器型组件" class="headerlink" title="容器型组件"></a><a name="k2g0cr"></a>容器型组件</h3><p>容器型组件是与store直连的组件，为展示型组件或其它容器组件提供数据和行为，尽量避免在其中做一些界面渲染相关的事情。</p>
<h3 id="展示型组件"><a href="#展示型组件" class="headerlink" title="展示型组件"></a><a name="3rwokl"></a>展示型组件</h3><p>展示型组件独立于应用的其它部分内容，不关心数据的加载和变更，保持职责单一，仅做视图呈现和最基本交互行为，通过props接收数据和回调函数输出结果，保证接收的数据为组件数据依赖的最小集。</p>
<p>如果展示型组件粒度切分能很好的遵循高内聚低耦合和职责单一原则的话，可以沉淀出很多可复用的通用业务组件。</p>
<h2 id="跨模块通信"><a href="#跨模块通信" class="headerlink" title="跨模块通信"></a><a name="qi0rrb"></a>跨模块通信</h2><p>模块粒度逐渐细化，会带来更多的跨模块通信诉求，为避免模块间相互耦合、确保架构长期干净可维护，建议将跨模块通信的逻辑代码放在父模块中，或者在一个叫做Mediator层中单独维护</p>
<ul>
<li>不允许在一个模块内部直接调用其他模块的Dispatch方法（写操作、变更其他模块的state）</li>
<li>不允许在一个模块内部直接读取其他模块的state方法（读操作）</li>
</ul>
<h2 id="数据流管理"><a href="#数据流管理" class="headerlink" title="数据流管理"></a><a name="4sogkf"></a>数据流管理</h2><p>纯函数：入参相同的情况下，返回值恒等<br>非纯函数：函数中如果包含 Math.random，new Date(), 异步请求等内容，且影响到最终结果的返回，即为非纯函数</p>
<p>监听Store变更刷新视图的功能是由react-redux完成的：</p>
<ul>
<li style="list-style: none"><input type="checkbox"> <code>&lt;Provider&gt;</code> 组件通过context属性向后代<code>&lt;connect&gt;</code>组件提供（provide）store对象；</li>
<li style="list-style: none"><input type="checkbox"> <code>&lt;connect&gt;</code> 是一个高阶组件，作用是将store与view层组件连接起来（这里重复提一句，redux官方将<code>&lt;connect&gt;</code>直接连接的组件定义为container component），<code>&lt;connect&gt;</code>向开发者开放了几个回调函数钩子（mapStateToProps, mapDispatchToProps…）用于自定义注入 container component 的 props 的姿势；</li>
<li style="list-style: none"><input type="checkbox"> react-redux 监听 redux store 的变更，store 改变后通知每一个 connect 组件刷新自己和后代组件，为了减少不必要的刷新提升性能，connect 实现了 shouldComponentUpdate 方法，如果 props 不变的话，不刷新 connect 包裹的 container component；</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">组件</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/业务场景解决方案/" class="article-tag-list-link color4">业务场景解决方案</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/如何管理好10万行代码的前端单页面应用/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-Webpack 中 publicPath 详解" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/Webpack 中 publicPath 详解/">Webpack 中 publicPath 详解</a>
    </h1>
  

        
        <a href="/2018/12/21/Webpack 中 publicPath 详解/" class="archive-article-date">
  	<time datetime="2018-12-21T12:39:18.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [组件]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 前端工程化</span></span></p>
<hr>
<h2 id="output"><a href="#output" class="headerlink" title="output"></a><a name="9v9aem"></a>output</h2><h3 id="output-path"><a href="#output-path" class="headerlink" title="output.path"></a><a name="1kd7an"></a>output.path</h3><ul>
<li>默认值：process.cwd()</li>
<li>只是指示输出的目录，对应一个<strong>绝对路径</strong></li>
<li><code>output: {path: path.resolve(__dirname, &#39;../dist&#39;),}</code></li>
</ul>
<h3 id="output-publicPath"><a href="#output-publicPath" class="headerlink" title="output.publicPath"></a><a name="b9acef"></a>output.publicPath</h3><ul>
<li>默认值：空字符串</li>
<li>帮助你为项目中的所有资源指定一个基础路径，它被称为公共路径(<code>publicPath</code>)</li>
<li>所有资源的基础路径: 项目中引用css，js，img等资源时候的一个基础路径,要配合具体资源中指定的路径使用</li>
<li><code>静态资源最终访问路径 =</code>output.publicPath<code>+ 资源loader或插件等配置路径</code></li>
<li>静态资源最终访问路径: 在使用<code>html-webpack-plugin</code>打包后得到的html中可以看到</li>
<li>相对路径: 相对于<code>build</code>之后的<code>index.html</code>(如果设置<code>publicPath: &#39;./dist/&#39;</code>，则打包后js的引用路径为<code>./dist/build.js</code>)</li>
<li>将<code>publicPath</code>设置成/,则打包后访问路径为<code>localhost:8080/dist/main.js</code>，本地无法访问</li>
<li>一般情况下publicPath应该以’/‘结尾，而其他loader或插件的配置不要以’/‘开头</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">output.publicPath = <span class="string">'/dist/'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// image</span></span><br><span class="line">options: &#123;</span><br><span class="line"> 	name: <span class="string">'img/[name].[ext]?[hash]'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最终图片的访问路径为</span></span><br><span class="line">output.publicPath + <span class="string">'img/[name].[ext]?[hash]'</span> = <span class="string">'/dist/img/[name].[ext]?[hash]'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// js output.filename</span></span><br><span class="line">output: &#123;</span><br><span class="line">	filename: <span class="string">'[name].js'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 最终js的访问路径为</span></span><br><span class="line">output.publicPath + <span class="string">'[name].js'</span> = <span class="string">'/dist/[name].js'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// extract-text-webpack-plugin css</span></span><br><span class="line"><span class="keyword">new</span> ExtractTextPlugin(&#123;</span><br><span class="line">	filename: <span class="string">'style.[chunkhash].css'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 最终css的访问路径为</span></span><br><span class="line">output.publicPath + <span class="string">'style.[chunkhash].css'</span> = <span class="string">'/dist/style.[chunkhash].css'</span></span><br></pre></td></tr></table></figure>
<h2 id="webpack-dev-server中的publicPath"><a href="#webpack-dev-server中的publicPath" class="headerlink" title="webpack-dev-server中的publicPath"></a><a name="a8a6ok"></a>webpack-dev-server中的publicPath</h2><ul>
<li>在开发阶段，我们借用devServer启动一个开发服务器进行开发，这里也会配置一个publicPath</li>
<li>webpack-dev-server中的publicPath路径下的打包文件可以在浏览器中访问。而静态资源仍然使用output.publicPath</li>
<li>webpack-dev-server打包的内容是放在内存中的，这些打包后的资源对外的的根目录就是publicPath</li>
<li>通过访问 <code>http://localhost:8080/webpack-dev-server</code>可以得到devServer启动后的资源访问路径，点击静态资源可以看到静态资源的访问路径为 <code>http://localhost:8080${publicPath}index.html</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 假设devServer的publicPath为</span><br><span class="line">const publicPath = &apos;/dist/&apos;</span><br><span class="line">// 则启动devServer后index.html的位置为</span><br><span class="line">const htmlPath = `$&#123;pablicPath&#125;index.html`</span><br><span class="line">// 包的位置</span><br><span class="line">cosnt mainJsPath = `$&#123;pablicPath&#125;main.js`</span><br></pre></td></tr></table></figure>
<p>以上可以直接通过<a href="http://lcoalhost:8080/dist/main.js访问到" target="_blank" rel="noopener">http://lcoalhost:8080/dist/main.js访问到</a></p>
<h2 id="html-webpack-plugin中的会受到路径影响的属性"><a href="#html-webpack-plugin中的会受到路径影响的属性" class="headerlink" title="html-webpack-plugin中的会受到路径影响的属性"></a><a name="opi3so"></a>html-webpack-plugin中的会受到路径影响的属性</h2><h3 id="template"><a href="#template" class="headerlink" title="template"></a><a name="6dzicw"></a>template</h3><ul>
<li>作用：用于定义模版文件的路径</li>
<li>源码：<code>this.options.template = this.getFullTemplatePath(this.options.template, compiler.context);</code></li>
<li>因此template只有定义在<strong>webpack的context</strong>下才会被识别，<code>webpack context</code>的默认值为<code>process.cwd()</code>，即运行 node 命令时所在的文件夹的绝对路径</li>
</ul>
<h3 id="filename"><a href="#filename" class="headerlink" title="filename"></a><a name="i691ou"></a>filename</h3><ul>
<li>作用：输出的HTML文件名，默认为index.html，可以直接配置带有子目录</li>
<li>源码：<code>this.options.filename = path.relative(compiler.options.output.path, filename);</code></li>
<li>所以filename的路径是相对于output.path的，而在webpack-dev-server中，则是相对于webpack-dev-server配置的publicPath。</li>
<li>如果webpack-dev-server的publicPath和output.publicPath不一致，在使用html-webpack-plugin可能会导致引用静态资源失败，因为在devServer中仍然以output.publicPath引用静态资源，和webpack-dev-server的提供的资源访问路径不一致，从而无法正常访问。</li>
<li>有一种情况除外，就是output.publicPath是相对路径，这时候可以访问本地资源</li>
<li>所以一般情况下都要保证devServer中的publicPath与output.publicPath保持一致。</li>
</ul>
<h2 id="路径"><a href="#路径" class="headerlink" title="路径"></a><a name="6kumgb"></a>路径</h2><h3 id="斜杠"><a href="#斜杠" class="headerlink" title="斜杠"></a><a name="uce7bk"></a>斜杠</h3><p>配置中<code>/</code>代表url根路径：（例如<a href="http://localhost:8080/dist/js/test.js中的http://localhost:8080/）" target="_blank" rel="noopener">http://localhost:8080/dist/js/test.js中的http://localhost:8080/）</a></p>
<h3 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a><a name="6dr5ox"></a>devServer</h3><ul>
<li>devServer.contentBase 告诉服务器从哪里提供内容。只有在你想要提供静态文件时才需要。</li>
<li>devServer.publicPath 将用于确定应该从哪里提供 bundle，并且此选项优先。</li>
</ul>
<h3 id="node中的路径"><a href="#node中的路径" class="headerlink" title="node中的路径"></a><a name="6x3fto"></a>node中的路径</h3><p>文件结构：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app/</span><br><span class="line">    -lib/</span><br><span class="line">        -common.js</span><br><span class="line">    -model</span><br><span class="line">        -task.js</span><br><span class="line">        -test.js</span><br></pre></td></tr></table></figure></p>
<p>task.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(__dirname); <span class="comment">// </span></span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"><span class="built_in">console</span>.log(process.cwd());</span><br><span class="line"><span class="built_in">console</span>.log(path.resolve(<span class="string">'./'</span>));</span><br></pre></td></tr></table></figure>
<p>在 model 目录下运行 node task.js 得到的输出是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/Users/guo/Sites/learn/app/model</span><br><span class="line">/Users/guo/Sites/learn/app/model/task.js</span><br><span class="line">/Users/guo/Sites/learn/app/model</span><br><span class="line">/Users/guo/Sites/learn/app/model</span><br></pre></td></tr></table></figure>
<p>在 app 目录下运行 node model/task.js，得到的输出是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/Users/guo/Sites/learn/app/model</span><br><span class="line">/Users/guo/Sites/learn/app/model/task.js</span><br><span class="line">/Users/guo/Sites/learn/app</span><br><span class="line">/Users/guo/Sites/learn/app</span><br></pre></td></tr></table></figure>
<h4 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a><a name="bgzlen"></a>绝对路径</h4><ul>
<li><code>__dirname</code>: 总是返回被执行的 js 所在文件夹的绝对路径</li>
<li><code>__filename</code>: 总是返回被执行的 js 的绝对路径</li>
<li><code>process.cwd()</code>: 总是返回运行 node 命令时所在的文件夹的绝对路径</li>
</ul>
<h4 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a><a name="bitcom"></a>相对路径</h4><ul>
<li>./ : 在 require() 中使用是跟 <code>__dirname</code> 的效果相同，不会因为启动脚本的目录不一样而改变，在其他情况下跟 process.cwd() 效果相同，是相对于启动脚本所在目录的路径。</li>
<li>../</li>
</ul>
<p>require的路径必须是相对于当前执行文件的,只有在 require() 时才使用相对路径(./, ../) 的写法，其他地方一律使用绝对路径，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 当前目录下</span><br><span class="line">path.dirname(__filename) + <span class="string">'/test.js'</span>;</span><br><span class="line">// 相邻目录下</span><br><span class="line">path.resolve(__dirname, <span class="string">'../lib/common.js'</span>);</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/前端工程化/" class="article-tag-list-link color1">前端工程化</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/Webpack 中 publicPath 详解/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-自己写 cli 提高工作效率" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/21/自己写 cli 提高工作效率/">自己写 cli 提高工作效率</a>
    </h1>
  

        
        <a href="/2018/12/21/自己写 cli 提高工作效率/" class="archive-article-date">
  	<time datetime="2018-12-21T07:06:44.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-21</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [组件]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 前端工程化</span></span></p>
<hr>
<h1 id="cli-工具需要满足的需求"><a href="#cli-工具需要满足的需求" class="headerlink" title="cli 工具需要满足的需求"></a><a name="x8c4hn"></a>cli 工具需要满足的需求</h1><ol>
<li>获得用户的输入，并且根据相应的输入，可以定制编程相应执行逻辑</li>
<li>模板代码有两种实现思路，一是采用代码生成，二是分离静态资源模板</li>
<li>使用包管理工具</li>
</ol>
<h1 id="项目需求"><a href="#项目需求" class="headerlink" title="项目需求"></a><a name="i59odo"></a>项目需求</h1><ul>
<li>自动创建组件需要的目录</li>
<li>自动添加模版代码</li>
<li>添加组件 js 和 css 代码</li>
</ul>
<h1 id="推荐包"><a href="#推荐包" class="headerlink" title="推荐包"></a><a name="08hbkv"></a>推荐包</h1><h3 id="commander"><a href="#commander" class="headerlink" title="commander"></a><a name="0vguqi"></a>commander</h3><p><a href="https://github.com/tj/commander.js" target="_blank" rel="noopener">commander.js</a></p>
<p>commander是目前很成熟的Node命令行交互接口实现工具，使用该工具可以很便捷很快速地实现第一点需求</p>
<h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git-clone"></a><a name="r4r6ur"></a>git-clone</h3><p>git-clone是一个很轻量的Node编写的git clone封装，可以很便捷很快速地从github上克隆执行项目模板。也就是说，我们将项目模板静态存储在github上，每当执行cli命令时，将其下载，这样我们就很轻松地得到了项目代码模板。另外，当需要改变项目模板代码时，只需要修改github上的项目代码就可以，cli工具无需修改</p>
<h3 id="shelljs"><a href="#shelljs" class="headerlink" title="shelljs"></a><a name="m4d1gg"></a>shelljs</h3><p>shelljs同样是一个很轻量的Node编写的系统命令封装，可以很便捷很快速地在Node代码中使用系统命令。在本例中，因为从github上下载的项目代码会带有.git文件，需要使用rm命令将其删除</p>
<h3 id="chalk"><a href="#chalk" class="headerlink" title="chalk"></a><a name="yhikdr"></a>chalk</h3><p>用于高亮终端打印出来的信息</p>
<h3 id="request"><a href="#request" class="headerlink" title="request"></a><a name="4t2xcu"></a>request</h3><p>发送http请求的工具</p>
<h1 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a><a name="2up2uq"></a>初始化项目</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir rc-new</span><br><span class="line"><span class="built_in">cd</span> rc-new</span><br><span class="line">npm init -y</span><br><span class="line">yarn add react</span><br></pre></td></tr></table></figure>
<h1 id="创建模板文件"><a href="#创建模板文件" class="headerlink" title="创建模板文件"></a><a name="axtyzg"></a>创建模板文件</h1><p>React 新建组件的方式有三种：</p>
<ul>
<li>类组件：class.jsx</li>
<li>函数组件: functional.jsx</li>
<li>纯组件: pure-class.jsx</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir src </span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">mkdir template</span><br><span class="line"><span class="built_in">cd</span> template</span><br><span class="line">touch class.jsx functional.jsx pure-class.jsx</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// class.jsx</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// COMPONENT_NAME 是占位符</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">COMPONENT_NAME</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;div /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default COMPONENT_NAME;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> COMPONENT_NAME = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &lt;div /&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default COMPONENT_NAME;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">COMPONENT_NAME</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;div /&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default COMPONENT_NAME;</span><br></pre></td></tr></table></figure>
<h1 id="命令行工具"><a href="#命令行工具" class="headerlink" title="命令行工具"></a><a name="648wpm"></a>命令行工具</h1><p>1、package.json 设置入口文件<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"bin": &#123;</span><br><span class="line">   "rc-new": "./src/index.js"</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p>
<p>2、在 bin/index.js 顶部声明此文件需要调用 Node.js 执行<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!usr/bin/env/ node</span></span><br></pre></td></tr></table></figure></p>
<p>3、命令行交互模块 commander.js<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add chalk commander prettier</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> program = <span class="built_in">require</span>(<span class="string">'commander'</span>)</span><br></pre></td></tr></table></figure>
<h1 id="执行"><a href="#执行" class="headerlink" title="执行"></a><a name="du0wsr"></a>执行</h1><p>打开命令行工具，进入当前开发文件夹,输入命令bin/index.js，即可以输出“my first cli”</p>
<p>我们如何像发布后一样，直接输node-cli命令就可以调用我们的主文件呢？</p>
<p>在开发目录执行<code>sudo npm link</code>将模块链接到全局，如想去掉 link，执行<code>sudo npm unlink</code></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/前端工程化/" class="article-tag-list-link color1">前端工程化</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/21/自己写 cli 提高工作效率/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-webpack To V4 from V3" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/19/webpack To V4 from V3/">webpack To V4 from V3</a>
    </h1>
  

        
        <a href="/2018/12/19/webpack To V4 from V3/" class="archive-article-date">
  	<time datetime="2018-12-19T10:11:47.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-19</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [组件]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 前端工程化</span></span></p>
<hr>
<h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a><a name="t57ggz"></a>Node.js</h1><p>Node.js &gt;= V6</p>
<h1 id="Cli"><a href="#Cli" class="headerlink" title="Cli"></a><a name="i3eehd"></a>Cli</h1><p>webpack-cli 需要单独安装</p>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a><a name="h0ento"></a>插件</h1><p>许多插件需要更新到最新的可兼容版本</p>
<h1 id="mode"><a href="#mode" class="headerlink" title="mode"></a><a name="ye1ukm"></a>mode</h1><p>新特性用来区分环境<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  mode: 'production',</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>或者通过命令行Cli命令：<code>--mode production</code><span data-type="color" style="color:rgb(43, 58, 66)">/</span><code>--mode development</code></p>
<h1 id="已移除-分离的插件"><a href="#已移除-分离的插件" class="headerlink" title="已移除|分离的插件"></a><a name="qy1gsk"></a>已移除|分离的插件</h1><h2 id="prod-模式移除的插件"><a href="#prod-模式移除的插件" class="headerlink" title="prod 模式移除的插件"></a><a name="arkyyv"></a>prod 模式移除的插件</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">-    new NoEmitOnErrorsPlugin(),</span><br><span class="line">-    new ModuleConcatenationPlugin(),</span><br><span class="line">-    new DefinePlugin(&#123; "process.env.NODE_ENV": JSON.stringify("production") &#125;)</span><br><span class="line">-    new UglifyJsPlugin()</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="dev-模式移除的插件"><a href="#dev-模式移除的插件" class="headerlink" title="dev 模式移除的插件"></a><a name="d95ntr"></a>dev 模式移除的插件</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">-    new NamedModulesPlugin()</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="已经分离的插件"><a href="#已经分离的插件" class="headerlink" title="已经分离的插件"></a><a name="blu5zr"></a>已经分离的插件</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  plugins: [</span><br><span class="line">-    new NoErrorsPlugin(),</span><br><span class="line">-    new NewWatchingPlugin()</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="再见-CommonsChunkPlugin"><a href="#再见-CommonsChunkPlugin" class="headerlink" title="再见 CommonsChunkPlugin"></a><a name="kinwao"></a>再见 CommonsChunkPlugin</h2><p>提取公共代码 webpack4.0 不再使用CommonsChunkPlugin，取而代之的是内置的 <a href="https://webpack.js.org/configuration/optimization/#optimization-splitchunks" target="_blank" rel="noopener">optimization.splitChunks</a> ，默认的配置或许可以完全满足你的需求</p>
<blockquote>
<p>1、commonchunk配置项被彻底去掉，之前需要通过配置两次 new webpack.optimize.CommonsChunkPlugin 来分别获取 vendor 和 manifest 的通用chunk方式已经做了整合，<strong> 直接在optimization中配置 runtimeChunk 和 splitChunks 即可 </strong>，提取功能也更为强大<br>2、runtimeChunk 可以配置成 true，single 或者对象，用自动计算当前构建的一些基础chunk信息，类似之前版本中的 manifest 信息获取方式。<br>3、webpack.optimize.UglifyJsPlugin 现在也不需要了，只需要使用 optimization.minimize 为 true 就行，production mode下面自动为 true，当然如果想使用第三方的压缩插件也可以在 optimization.minimizer 的数组列表中进行配置</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  //...</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      chunks: 'async',</span><br><span class="line">      minSize: 30000,</span><br><span class="line">      maxSize: 0,</span><br><span class="line">      minChunks: 1,</span><br><span class="line">      maxAsyncRequests: 5,</span><br><span class="line">      maxInitialRequests: 3,</span><br><span class="line">      automaticNameDelimiter: '~',</span><br><span class="line">      name: true,</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        vendors: &#123;</span><br><span class="line">          test: /[\\/]node_modules[\\/]/,</span><br><span class="line">          priority: -10</span><br><span class="line">        &#125;,</span><br><span class="line">        default: &#123;</span><br><span class="line">          minChunks: 2,</span><br><span class="line">          priority: -20,</span><br><span class="line">          reuseExistingChunk: true</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="再见-extract-text-webpack-plugin"><a href="#再见-extract-text-webpack-plugin" class="headerlink" title="再见 extract-text-webpack-plugin"></a><a name="tps9ok"></a>再见 extract-text-webpack-plugin</h3><p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">提取 JS 中的 CSS 代码到单独的文件中 </span></span>webpack4.0 不再使用 extract-text-webpack-plugin，取而代之的是<a href="https://webpack.js.org/plugins/mini-css-extract-plugin/" target="_blank" rel="noopener">mini-css-extract-plugin</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.dev.js</span></span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> devMode = process.env.NODE_ENV !== <span class="string">'production'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      <span class="comment">// Options similar to the same options in webpackOptions.output</span></span><br><span class="line">      <span class="comment">// both options are optional</span></span><br><span class="line">      filename: devMode ? <span class="string">'[name].css'</span> : <span class="string">'[name].[hash].css'</span>,</span><br><span class="line">      chunkFilename: devMode ? <span class="string">'[id].css'</span> : <span class="string">'[id].[hash].css'</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(le|c)ss$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          devMode ? <span class="string">'style-loader'</span> : MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'postcss-loader'</span>,</span><br><span class="line">          <span class="string">'less-loader'</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// webpack.prod.js</span></span><br><span class="line"><span class="keyword">const</span> UglifyJsPlugin = <span class="built_in">require</span>(<span class="string">"uglifyjs-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">"mini-css-extract-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">"optimize-css-assets-webpack-plugin"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> UglifyJsPlugin(&#123;</span><br><span class="line">        cache: <span class="literal">true</span>,</span><br><span class="line">        parallel: <span class="literal">true</span>, <span class="comment">// 多线程</span></span><br><span class="line">        sourceMap: <span class="literal">true</span> <span class="comment">// set to true if you want JS source maps</span></span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">"[name].css"</span>,</span><br><span class="line">      chunkFilename: <span class="string">"[id].css"</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(sa|sc|c)ss$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">           MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">          <span class="string">'postcss-loader'</span>,</span><br><span class="line">          <span class="string">'less-loader'</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="import-and-CommonJS"><a href="#import-and-CommonJS" class="headerlink" title="import() and CommonJS"></a><a name="kua8ab"></a>import() and CommonJS</h2><p>当通过 <span data-type="color" style="color:rgb(43, 58, 66)"><span data-type="background" style="background-color:rgba(70, 94, 105, 0.05)">import()  </span></span>导入 <strong>non-esm.js 的结果时，现在你需要通过 </strong><span data-type="color" style="color:rgb(43, 58, 66)"><span data-type="background" style="background-color:rgba(70, 94, 105, 0.05)">default  属性来获取 module.exports 的值</span></span></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># non-esm.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  sayHello: () =&gt; &#123;</span><br><span class="line">    console.log('hello world');</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># example.jsc</span><br><span class="line">function sayHello() &#123;</span><br><span class="line">  import('./non-esm.js').then(module =&gt; &#123;</span><br><span class="line">    module.default.sayHello();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="json-and-loaders"><a href="#json-and-loaders" class="headerlink" title="json and loaders"></a><a name="e87vwv"></a>json and loaders</h2><p>当用自定义的loader来转换 <span data-type="color" style="color:rgb(43, 58, 66)"><span data-type="background" style="background-color:rgba(70, 94, 105, 0.05)">.json </span></span>文件时，需要添加 <span data-type="background" style="background-color:#FADB14">module.rules.</span><span data-type="color" style="color:rgb(43, 58, 66)"><span data-type="background" style="background-color:#FADB14">type</span></span><br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  // ...</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: /config\.json$/,</span><br><span class="line">      loader: 'special-loader',</span><br><span class="line">+     type: 'javascript/auto',</span><br><span class="line">      options: &#123;...&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>如果使用 <span data-type="color" style="color:rgb(43, 58, 66)"><span data-type="background" style="background-color:rgba(70, 94, 105, 0.05)">json-loader </span></span> ，可以移除</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">-     test: <span class="regexp">/\.json$/</span>,</span><br><span class="line">-     loader: <span class="string">'json-loader'</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="module-loaders"><a href="#module-loaders" class="headerlink" title="module.loaders"></a><a name="4z4hww"></a>module.loaders</h2><p><span data-type="color" style="color:rgb(43, 58, 66)"><span data-type="background" style="background-color:rgba(70, 94, 105, 0.05)">module.loaders </span></span> 已移除，被 <a href="https://webpack.js.org/configuration/module/#rule" target="_blank" rel="noopener">module.rules</a> 取代</p>
<h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a><a name="pm5xls"></a>参考资源</h2><p>更多插件请见 <a href="https://webpack.js.org/plugins/" target="_blank" rel="noopener">https://webpack.js.org/plugins/</a></p>
<h1 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a><a name="9m4tlh"></a>报错信息</h1><p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545214674490-15097e94-3a47-4611-8315-9b26dbcdb3f1.png" alt="image.png | left | 747x102"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545214733586-4b5facf3-65ca-429c-89a3-ccdf47c3f77f.png" alt="image.png | left | 747x230"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2018/png/84728/1545354544744-b4ebd051-4508-490a-beca-d69eb2fb186f.png" alt="image.png | left | 747x273"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/前端工程化/" class="article-tag-list-link color1">前端工程化</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/19/webpack To V4 from V3/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-VScode 插件工具集，不求全但求好" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/18/VScode 插件工具集，不求全但求好/">VScode 插件工具集，不求全但求好</a>
    </h1>
  

        
        <a href="/2018/12/18/VScode 插件工具集，不求全但求好/" class="archive-article-date">
  	<time datetime="2018-12-18T07:36:06.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-18</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><a href="https://marketplace.visualstudio.com/vscode" target="_blank" rel="noopener">更多插件可以到官网自行探索</a></p>
<p>根据调查发现，VScode 和 sublime 是前端开发者比较喜欢的 IDE 。“工欲善其事，必先利其器”，我是一个爱折腾的工具控，刚开始用 VScode 的时候，装了一堆的插件，导致只要开启 VScode 再接上大屏，我的 Mac 就会强烈的反抗，风扇一直呼啸，😳😳….后来就开启卸载模式，开始一直卸，最终保留一些小而美，使用率高的插件，整理一份以便不备之需。</p>
<p>而对于一个团队而言，大家用同一套快捷键，同一个IDE，同一套插件，那么结对编程将会是一件特别幸福的事情。和帅哥哥一起编程还是可以学到很多东西的，嘻嘻～～</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><a name="fdq5wt"></a></h2><h2 id="一、代码快捷键"><a href="#一、代码快捷键" class="headerlink" title="一、代码快捷键"></a><a name="fdq5wt"></a>一、代码快捷键</h2><p>在 VScode 的首页可以设置通用快捷键，因为平常用sublime比较多，所以干脆合并成一套。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-40a907bac6659ad1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image | left"></p>
<h2 id="二、代码提示"><a href="#二、代码提示" class="headerlink" title="二、代码提示"></a><a name="fgtrni"></a>二、代码提示</h2><h3 id="Path-Intellisense"><a href="#Path-Intellisense" class="headerlink" title="Path Intellisense"></a><a name="ubgshx"></a>Path Intellisense</h3><p>自动路径补全</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-bb654863cc5c4b22?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="Document-this"><a href="#Document-this" class="headerlink" title="Document this"></a><a name="r2f9dh"></a>Document this</h3><p>js 的注释模板 （注意：新版的 vscode 已经原生支持,在 function 上输入 /** tab ）</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-0ab5bfc937d0c007?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h2 id="三、代码格式"><a href="#三、代码格式" class="headerlink" title="三、代码格式"></a><a name="13kgce"></a>三、代码格式</h2><h3 id="ESlint"><a href="#ESlint" class="headerlink" title="ESlint"></a><a name="gqwayo"></a>ESlint</h3><p>代码规范，对不符合要求的代码或者有语法错误的JS代码进行提示，可以自定制提示规则</p>
<h3 id="HTMLHint"><a href="#HTMLHint" class="headerlink" title="HTMLHint"></a><a name="bgyqfz"></a>HTMLHint</h3><p>html代码检测</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-4e55e0669de282da?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image | left"></p>
<h3 id="beautify"><a href="#beautify" class="headerlink" title="beautify"></a><a name="vmaien"></a>beautify</h3><p>格式化代码的工具</p>
<h2 id="四、代码可视化改善"><a href="#四、代码可视化改善" class="headerlink" title="四、代码可视化改善"></a><a name="f8eoyv"></a>四、代码可视化改善</h2><h3 id="colorize"><a href="#colorize" class="headerlink" title="colorize"></a><a name="th4acu"></a>colorize</h3><p>可视化颜色哦，做组件涉及很多不同的主题，个人还是蛮稀饭的</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-3ea2845035230329?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="RegExp-Preview-and-Editor"><a href="#RegExp-Preview-and-Editor" class="headerlink" title="RegExp Preview and Editor"></a><a name="dpstqc"></a>RegExp Preview and Editor</h3><p>这个就厉害了.可以完美的展示你写的正则,图形化给你看你写正则的形成</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-44d4a16ffdb80acf?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="Better-Comments"><a href="#Better-Comments" class="headerlink" title="Better Comments"></a><a name="5ck9mr"></a>Better Comments</h3><p>最好用的注释区域高亮,对于TODO这些支持也很好</p>
<h3 id="BreadCrumb-in-StatusBar"><a href="#BreadCrumb-in-StatusBar" class="headerlink" title="BreadCrumb in StatusBar"></a><a name="prxbfk"></a>BreadCrumb in StatusBar</h3><p><img src="https://upload-images.jianshu.io/upload_images/5383939-0e76ffb466881bf8?imageMogr2/auto-orient/strip" alt="image | left"></p>
<hr>
<p>华丽丽的分割线，以下插件根据框架语言选择，用什么装什么，不用就不要装了，浪费内存</p>
<h2 id="五、React-插件"><a href="#五、React-插件" class="headerlink" title="五、React 插件"></a><a name="3o8qew"></a>五、React 插件</h2><h3 id="ES7-React-Redux-GraphQL-React-Native-snippets"><a href="#ES7-React-Redux-GraphQL-React-Native-snippets" class="headerlink" title="ES7 React/Redux/GraphQL/React-Native snippets"></a><a name="csi3bk"></a>ES7 React/Redux/GraphQL/React-Native snippets</h3><p>涵盖的代码片段贼丰富，React 相关代码提示有这个就够了</p>
<h3 id="Useful-React-Snippets"><a href="#Useful-React-Snippets" class="headerlink" title="Useful React Snippets"></a><a name="4c9itr"></a>Useful React Snippets</h3><p>当然如果你只用React,那用这个代码提示吧，管够了</p>
<h3 id="CSS-Blocks"><a href="#CSS-Blocks" class="headerlink" title="CSS Blocks"></a><a name="w22ykc"></a>CSS Blocks</h3><p>支持 css 模块化的智能提示，跳转，墙裂推荐</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-86773b25f36401b9?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="styled-components-snippets"><a href="#styled-components-snippets" class="headerlink" title="styled-components-snippets"></a><a name="zrkptg"></a>styled-components-snippets</h3><p>styled-components 的代码片段</p>
<h2 id="六、Vue-插件"><a href="#六、Vue-插件" class="headerlink" title="六、Vue 插件"></a><a name="l54eud"></a>六、Vue 插件</h2><h3 id="vetur"><a href="#vetur" class="headerlink" title="vetur"></a><a name="wp3prr"></a>vetur</h3><p>语法高亮、智能感知、Emmet 等</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-c327888e2e4f4035?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image | left"></p>
<h3 id="VueHelper"><a href="#VueHelper" class="headerlink" title="VueHelper"></a><a name="1ntxut"></a>VueHelper</h3><p>snippet 代码片段</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-0edc302df5b0c10d?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="Vue-VSCode-Snippets"><a href="#Vue-VSCode-Snippets" class="headerlink" title="Vue VSCode Snippets"></a><a name="0go3ai"></a>Vue VSCode Snippets</h3><p>很全面的vue代码片段</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-db0aa01a0b5489b3?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h2 id="七、Node"><a href="#七、Node" class="headerlink" title="七、Node"></a><a name="dr5wcd"></a>七、Node</h2><h3 id="eggjs"><a href="#eggjs" class="headerlink" title="eggjs"></a><a name="bwz8it"></a>eggjs</h3><p>蛋框的相关帮助插件,代码片段,智能提示等</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-17f24db5acef42e8?imageMogr2/auto-orient/strip" alt="image | left"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-b044554eaa227b16?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="egg-jump-definition"><a href="#egg-jump-definition" class="headerlink" title="egg-jump-definition"></a><a name="s2zhhi"></a>egg-jump-definition</h3><p>蛋框的函数跳转：Cmd+4</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-b257bcccbab6fd5d?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h2 id="八、微信小程序"><a href="#八、微信小程序" class="headerlink" title="八、微信小程序"></a><a name="u9fveh"></a>八、微信小程序</h2><h3 id="mpvue-snippets"><a href="#mpvue-snippets" class="headerlink" title="mpvue snippets"></a><a name="31orbv"></a>mpvue snippets</h3><p>mpvue的一些代码片段,以及部分原生小程序的代码提示</p>
<h3 id="minapp"><a href="#minapp" class="headerlink" title="minapp"></a><a name="3n0rzq"></a>minapp</h3><p>用VS Code写小程序必备的插件,里面有众多实用的特性集成</p>
<h2 id="九、Markdown-插件"><a href="#九、Markdown-插件" class="headerlink" title="九、Markdown 插件"></a><a name="zpgdfq"></a>九、Markdown 插件</h2><h3 id="Markdown-All-in-One"><a href="#Markdown-All-in-One" class="headerlink" title="Markdown All in One"></a><a name="tgtswt"></a>Markdown All in One</h3><p>Markdown 的提示插件用这一个足以，集成了语法快捷键、Math、预览等，很实用</p>
<h3 id="markdownlint"><a href="#markdownlint" class="headerlink" title="markdownlint"></a><a name="dlsvkl"></a>markdownlint</h3><p>对 markdown 的语法格式规范进行代码提示</p>
<h2 id="十、代码审查"><a href="#十、代码审查" class="headerlink" title="十、代码审查"></a><a name="epfvur"></a>十、代码审查</h2><h3 id="CodeMetrics"><a href="#CodeMetrics" class="headerlink" title="CodeMetrics"></a><a name="50smcl"></a>CodeMetrics</h3><p>可以计算TS/JS内代码的复杂度(比如函数这些),这些与代码质量和性能是挂钩的</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-5512115fb73e220e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image | left"></p>
<h3 id="Import-Cost"><a href="#Import-Cost" class="headerlink" title="Import Cost"></a><a name="xyydzw"></a>Import Cost</h3><p>就是你import一个东西的时候,可以计算改引入模块的大小!</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-0d7510d3db09073f?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="Git-Lens"><a href="#Git-Lens" class="headerlink" title="Git Lens"></a><a name="n0ggxp"></a>Git Lens</h3><p>暂时没有发现比这个看git记录更为详细了</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-ce6714eec2662f83?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h2 id="十一、其他"><a href="#十一、其他" class="headerlink" title="十一、其他"></a><a name="o8gmbd"></a>十一、其他</h2><p>下面的插件可有可无，如有相应功能的需求，却也是非常棒的插件</p>
<h3 id="fileheader"><a href="#fileheader" class="headerlink" title="fileheader"></a><a name="ra3nao"></a>fileheader</h3><p>顶部注释模板，可定义作者、时间等信息，并会自动更新最后修改时间</p>
<blockquote>
<p>ctrl+alt+i</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-083ab547acb32459?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="Paste-JSON-as-Code"><a href="#Paste-JSON-as-Code" class="headerlink" title="Paste JSON as Code"></a><a name="gisbma"></a>Paste JSON as Code</h3><p>JSON 格式转换成其他的语言格式</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-0e8a6a469c19f477?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="Node-js-Modules-Intellisense"><a href="#Node-js-Modules-Intellisense" class="headerlink" title="Node.js Modules Intellisense"></a><a name="on2qni"></a>Node.js Modules Intellisense</h3><p>对于 node_module 的智能提示</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-bc7b3e8f8f6eef9e?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="npm-import-package-version"><a href="#npm-import-package-version" class="headerlink" title="npm-import-package-version"></a><a name="vw64mm"></a>npm-import-package-version</h3><p>显示导入的 npm 包的版本信息</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-8471585bd666ef67?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="File-Tree-View"><a href="#File-Tree-View" class="headerlink" title="File Tree View"></a><a name="ftwhbr"></a>File Tree View</h3><p>提供几个常见编程语言的函数或状态的树集合展示,可以快速点击跳转!!</p>
<h3 id="NPM-Scripts"><a href="#NPM-Scripts" class="headerlink" title="NPM-Scripts"></a><a name="rhtuke"></a>NPM-Scripts</h3><p>在侧边栏可视化执行 npm 命令(项目内的package.json),  小巧实用</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-c36064e8349bb1fd?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h3 id="emojisense"><a href="#emojisense" class="headerlink" title=":emojisense:"></a><a name="6o0gaf"></a>:emojisense:</h3><p><img src="https://upload-images.jianshu.io/upload_images/5383939-6a72b88473d23b7c?imageMogr2/auto-orient/strip" alt="image | left"></p>
<h2 id="十二、代码片段"><a href="#十二、代码片段" class="headerlink" title="十二、代码片段"></a><a name="0bzrhc"></a>十二、代码片段</h2><p>两种方式定义代码片段</p>
<p>菜单栏-&gt;文件-&gt;首选项-&gt;用户代码片段</p>
<p><img src="https://upload-images.jianshu.io/upload_images/5383939-9517e03b59ffa72f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image | left"></p>
<p><span data-type="background" style="background-color:#FADB14">ctrl+shift + p =&gt; snippet</span></p>
<ul>
<li><p>toRem: 只是一个单纯的描述</p>
</li>
<li><p>prefix: 是触发snippet的简写</p>
</li>
<li><p>body: 是展开的代码片段</p>
</li>
<li><p>\$1,\$2：表示占位符，用于用户展开代码片段所需要替换的，也可以写成\${1:label}键值对的方式</p>
</li>
<li><p>description: 用户你在输出snippet之前，方便自己识别的注释，而不用强行记忆那些简写的</p>
<blockquote>
</blockquote>
</li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/Tool/" class="article-tag-list-link color5">Tool</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/18/VScode 插件工具集，不求全但求好/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-package.json 的解读" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/17/package.json 的解读/">package.json 的解读</a>
    </h1>
  

        
        <a href="/2018/12/17/package.json 的解读/" class="archive-article-date">
  	<time datetime="2018-12-17T07:09:31.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-17</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
          <!-- Table of Contents -->
          
        <p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">tags: [组件]</span></span><br><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">categories: 前端工程化</span></span></p>
<hr>
<h1 id="官方字段"><a href="#官方字段" class="headerlink" title="官方字段"></a><a name="e438um"></a>官方字段</h1><h2 id="json-和-JS-对象的区别"><a href="#json-和-JS-对象的区别" class="headerlink" title="json 和 JS 对象的区别"></a><a name="lpfreb"></a>json 和 JS 对象的区别</h2><p>package.json，顾名思义，它是一个json文件，而不能写入JS对象。<br>所以我们首先要搞懂的是JSON和JS对象的区别：</p>
<div class="bi-table"><br>  <table><br>    <colgroup><br>      <col width="auto"><br>      <col width="auto"><br>      <col width="auto"><br>    </colgroup><br>    <tbody><br>      <tr><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">区别</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">Json</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">Javascript对象</div><br>        </td><br>      </tr><br>      <tr><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">含义</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">仅仅是一种数据格式</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">表示类的实例</div><br>        </td><br>      </tr><br>      <tr><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">传输</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">可以跨平台数据传输，速度快</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">不能传输</div><br>        </td><br>      </tr><br>      <tr><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">表现</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">1、键值对方式，键必须加双引号 2、值不能是方法函数，不能是undefined|NaN<br>          </div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">1、键值对方式，键不加引号 2、值可以是函数、对象、字符串、数字、boolean等<br>          </div><br>        </td><br>      </tr><br>      <tr><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">相互转换</div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">Json转化为JS对象： 1、JSON.parse(jsonstring); 2、json=eval(“(“+jsonstring+”)”)<br>          </div><br>        </td><br>        <td rowspan="1" colspan="1"><br>          <div data-type="p">JS对象转换为JSON: JSON.stringify(json)<br>          </div><br>        </td><br>      </tr><br>    </tbody><br>  </table><br></div>


<p>【注意】 在JSON中属性名一定要加上双引号</p>
<h2 id="name-字段"><a href="#name-字段" class="headerlink" title="name 字段"></a><a name="57agkw"></a>name 字段</h2><p><strong>name字段的限制</strong></p>
<ul>
<li>name字段必须小于214字符（这个没什么好记的～）</li>
<li>name字段不能包含有“.”符号和下划线（这个要记一下哦～）</li>
<li>name字段不能包含有大写字母（这个要记一下哦～）</li>
<li>name字段不能含有非URL安全的字符，因为它将当发布的时候，它将作为你的包的相关信息被写入URL中<br>  那么，有哪些算是非URL安全的字符呢？咱们看表说话：</li>
</ul>
<p><img src="./book/assets/url_safecode.png" alt="image | left"></p>
<h2 id="version-字段"><a href="#version-字段" class="headerlink" title="version 字段"></a><a name="1t9sbg"></a>version 字段</h2><h3 id="npm对version定义的规则要求"><a href="#npm对version定义的规则要求" class="headerlink" title="npm对version定义的规则要求"></a><a name="d31agy"></a>npm对version定义的规则要求</h3><p>对于”version”:”x.y.z”<br>1.修复bug,小改动，增加z<br>2.增加了新特性，但仍能向后兼容，增加y<br>3.有很大的改动，无法向后兼容,增加x</p>
<p>例如：我原本的项目是1.0.0版本的话<br>若是1中情况，变为1.0.1<br>若是2中情况，变为1.1.0<br>若是3中情况，变为2.0.0</p>
<h3 id="npm-有自己的检验version的模块——node-semver"><a href="#npm-有自己的检验version的模块——node-semver" class="headerlink" title="npm 有自己的检验version的模块——node-semver"></a><a name="0gwprg"></a>npm 有自己的检验version的模块——node-semver</h3><p>npm有自己的一套检验version正确性的模块，它叫做 node-semver，是一开始就跟随着npm一起被打包安装的。当然了，你也可以通过自己安装去在自己的项目中使用它。<br>使用的例子像这样：<br>先npm install –save semver<br>然后:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> semver = <span class="built_in">require</span>(<span class="string">'semver'</span>)</span><br><span class="line">semver.valid(<span class="string">'1.2.3'</span>) <span class="comment">// '1.2.3'</span></span><br><span class="line">semver.valid(<span class="string">'a.b.c'</span>) <span class="comment">// null</span></span><br></pre></td></tr></table></figure>
<h2 id="keywords-和-description-字段"><a href="#keywords-和-description-字段" class="headerlink" title="keywords 和 description 字段"></a><a name="5t56gy"></a>keywords 和 description 字段</h2><h3 id="字段要求："><a href="#字段要求：" class="headerlink" title="字段要求："></a><a name="hrwsrt"></a>字段要求：</h3><p>description：字符串<br>keywords：字符串数组</p>
<p>简单地说，这两个东东是npm搜索系统中的搜索条件，所以。如果你试图发布的是一个开源插件，那么这两个字段你应该重视</p>
<h2 id="license-字段"><a href="#license-字段" class="headerlink" title="license 字段"></a><a name="nq9ywd"></a>license 字段</h2><p>这是你指定的项目的许可证，它告诉他人他们是否有权利使用你的包，以及，在使用你的包的时候他们应该受到怎样的限制</p>
<p>字段要求：<br>单个license：直接写入名称</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">"license"</span> : <span class="string">"BSD-3-Clause"</span> &#125;</span><br></pre></td></tr></table></figure>
<p>多个license：在一对圆括号内写入license名称，且在多个license内用AND等连接</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">"license"</span> : <span class="string">"(ISC AND GPL-3.0)"</span> &#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://www.npmjs.com/package/spdx" target="_blank" rel="noopener">SPDX license表达式的语法规则 2.0版本</a></p>
<h2 id="author-字段"><a href="#author-字段" class="headerlink" title="author 字段"></a><a name="6wgflv"></a>author 字段</h2><p>要求：一个字符串或是一个对象。<br>如果是一个对象，该对象包含三个属性：<br>name属性(必填)<br>email属性（选填）<br>URL属性（选填）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">"name"</span> : <span class="string">"Barney Rubble"</span></span><br><span class="line">, <span class="attr">"email"</span> : <span class="string">"b@rubble.com"</span></span><br><span class="line">, <span class="attr">"url"</span> : <span class="string">"http://barnyrubble.tumblr.com/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="main-字段"><a href="#main-字段" class="headerlink" title="main 字段"></a><a name="oxo5aa"></a>main 字段</h2><p>这个是你项目的入口文件。简而言之，当别人安装了你发布的模块时，require你的模块的时候取得的就是你main字段规定的入口文件的输出。</p>
<p>例如你写入了 { “main”:”XXX.js”}，而他人通过npm install ‘你的模块名称’ . 安装了你的模块后，他通过 var X = require(‘你的模块名称’)取得的就是你在XXX.js的输出</p>
<h2 id="script-字段"><a href="#script-字段" class="headerlink" title="script 字段"></a><a name="0gg4no"></a>script 字段</h2><p>写进scripts的命令(command),可以通过npm run 或者npm  运行对应的shell指令，例如：{“scripts”: { “start”: “node main.js”} } 可以让你在终端输入npm start的时候，等同于运行了node main.js</p>
<h3 id="什么时候要加“run”-什么时候可以不用加“run”呢？"><a href="#什么时候要加“run”-什么时候可以不用加“run”呢？" class="headerlink" title="什么时候要加“run”,什么时候可以不用加“run”呢？"></a><a name="o7vnng"></a>什么时候要加“run”,什么时候可以不用加“run”呢？</h3><p>一个让我们可能有些困扰的问题是，通过<code>script</code>字段内的<code>npm命令</code>运行脚本时，有时候要加<code>“run”</code>，有时候又不要加<code>&quot;run&quot;</code>,即有时候是可以直接用<code>npm &lt;command&gt;</code>；而有时候又要用<code>npm run &lt;command&gt;</code> 才能运行脚本，这该如何区分呢？</p>
<p>首先要提一下的是，<code>run</code>的原名是<code>run-script</code>，是一段脚本，而<code>run</code>是它的一个别名（<code>alias</code>）</p>
<p>1.当<code>run[-script]</code>被 <code>test, start, restart, and stop</code>这四个自带的命令所使用时，它可以被省略（或者说不需要加<code>“run”</code>就可以直接调用），所以我们平时最常输入的<code>npm start</code>实际上相当于<code>npm run start</code>，只不过是为了方便省略了<code>run</code>而已</p>
<p>原文：<code>run[-script] is used by the test, start, restart, and stop commands, but can be called directly</code></p>
<p>2.当你在<code>package.json</code>的<code>script</code>字段中定义的是除了1中的4个命令外的命令的时候，你就不能省略<code>“run”</code>了<br>例如你定义</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "build": "XXX.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>的时候，你运行XXX.js就只能通过npm run build去运行了</p>
<h3 id="npm-为script字段中的脚本路径都加上了node-moudles-bin前缀"><a href="#npm-为script字段中的脚本路径都加上了node-moudles-bin前缀" class="headerlink" title="npm 为script字段中的脚本路径都加上了node_moudles/.bin前缀"></a><a name="i703qp"></a>npm 为script字段中的脚本路径都加上了node_moudles/.bin前缀</h3><p>npm为script字段中的脚本路径都加上了node_moudles/.bin前缀，这意味着：你在试图运行本地安装的依赖在 node_modules/.bin 中的脚本的时候，可以省略node_modules/.bin这个前缀。例如：<br>我刚npm install webpack了，而在我的项目下的node_modules目录的.bin子目录下：就多了一个叫做webpack的脚本</p>
<p>本来运行这个脚本的命令应该是：node_modules/.bin webpack<br>但由于npm已经自动帮我们加了node_modules/.bin前缀了，所以我们可以直接写成：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;"start": "webpack"&#125;</span><br></pre></td></tr></table></figure>
<p>而不用写成：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;"start": "node_modules/.bin webpack"&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>原文：npm run adds node_modules/.bin to the PATH provided to scripts. Any binaries provided by locally-installed dependencies can be used without the node_modules/.bin prefix</p>
</blockquote>
<blockquote>
<p>npm start是有默认值的，默认为：node server.js</p>
</blockquote>
<h2 id="better-npm-run-的安装与betterScript字段的使用"><a href="#better-npm-run-的安装与betterScript字段的使用" class="headerlink" title="better-npm-run 的安装与betterScript字段的使用"></a><a name="fhxxci"></a>better-npm-run 的安装与betterScript字段的使用</h2><p>这个是package.json文档介绍里所没有的，但这里我想特别讲一下：</p>
<p>先通过npm install better-npm-run安装好包，然后你就可以在你的package.json里面使用一个新的字段—— “betterScripts”字段</p>
<p>故名思意，它和”scripts”字段很像，那么两者间有什么联系呢？咱还是用代码说话吧，它可以把</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">   "test": "NODE_ENV=production karma start"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>变成：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "test": "better-npm-run test"</span><br><span class="line">&#125;,</span><br><span class="line">"betterScripts": &#123;</span><br><span class="line">    "test": &#123;</span><br><span class="line">        "command": "karma start",</span><br><span class="line">        "env": &#123;</span><br><span class="line">            "NODE_ENV": "test"</span><br><span class="line">          &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单地说，就是当运行”scripts”字段中的命令的时候，它会进一步去运行 “betterScripts”中对应的命令，并通过”env”对象控制运行时的环境变量，如NODE_ENV。</p>
<p>好处是让你的代码的可读性更强一些</p>
<p>另外提一下NODE_ENV的作用：<br>用来设置环境变量（默认值为development）。<br>通过检查这个值可以分别对开发环境和生产环境下做不同的处理</p>
<p>例如在服务端代码中通过检查是否是开发环境（development）决定是否启动代码热重载功能</p>
<p>（热重载只是为了在开发环境【developmen】提高生产效率用，在生产环境【production】没用）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'development'</span>) &#123;</span><br><span class="line"><span class="comment">// 省略诸多内容</span></span><br><span class="line">app.use(<span class="built_in">require</span>(<span class="string">'webpack-hot-middleware'</span>)(compiler, &#123;</span><br><span class="line">    path: <span class="string">'/__webpack_hmr'</span></span><br><span class="line">&#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="dependencies-字段和-devDependencies-字段"><a href="#dependencies-字段和-devDependencies-字段" class="headerlink" title="dependencies 字段和 devDependencies 字段"></a><a name="54ahbt"></a>dependencies 字段和 devDependencies 字段</h2><p>dependencies字段和devDependencies字段分别代表生产环境依赖和开发环境依赖</p>
<p>与两个字段相关的npm install的命令<br>npm install 模块 –save 安装好后写入package.json的dependencies中（生产环境依赖）<br>npm install 模块 –save-dev 安装好后写入package.json的devDepencies中（开发环境依赖）</p>
<p><strong>怎么区分到底安装包的时候放在dependencies中还是devDepencies中呢？</strong></p>
<p>很简单<br>1.一般你去github或者npm社区里面相关包的介绍后面都会带有–save 或者–save-dev 的参数的，这时候把命令直接复制过来运行就OK了，不用管那么多</p>
<p>2.如果没有1中的介绍，那么请思考，这个包到底是纯粹为了开发方便使用呢？还是要放到上线后APP的代码中呢？前者则为devDepencies，后者则为dependencies</p>
<p>【注意】：在团队协作中，一个常见的情景是他人从github上clone你的项目，然后通过npm install安装必要的依赖，（刚从github上clone下来是没有node_modules的，需要安装）那么根据什么信息安装依赖呢？就是你的package.json中的dependencies和devDepencies。所以，在本地安装的同时，将依赖包的信息（要求的名称和版本）写入package.json中是很重要的！</p>
<h2 id="prepublishOnly-字段"><a href="#prepublishOnly-字段" class="headerlink" title="prepublishOnly 字段"></a><a name="7xa0oi"></a>prepublishOnly 字段</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"prepublishOnly": "npm run build"</span><br></pre></td></tr></table></figure>
<p><span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">这样每次执行</span></span><code>npm publish</code><span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">前都会先执行</span></span><code>npm run build</code></p>
<h2 id="peerDependencies-字段"><a href="#peerDependencies-字段" class="headerlink" title="peerDependencies 字段"></a><a name="b7imam"></a>peerDependencies 字段</h2><p>同版本依赖</p>
<h1 id="非官方字段"><a href="#非官方字段" class="headerlink" title="非官方字段"></a><a name="b7mugf"></a>非官方字段</h1><h2 id="yarn-相关字段"><a href="#yarn-相关字段" class="headerlink" title="yarn 相关字段"></a><a name="7g2dis"></a>yarn 相关字段</h2><p><a href="https://github.com/yarnpkg/yarn" target="_blank" rel="noopener">yarn</a> : 类似 npm 的依赖管理工具，但 yarn 缓存了每个下载过的包，所以再次使用时无需重复下载，同时利用并行下载以最大化资源利用率，因此安装速度更快。</p>
<h3 id="flat"><a href="#flat" class="headerlink" title="flat"></a><a name="urd0tl"></a>flat</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"flat"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你的包只允许给定依赖的一个版本，你想强制和命令行上 <span data-type="background" style="background-color:#FADB14">yarn install –flat </span>相同的行为，把这个值设为<span data-type="background" style="background-color:#FADB14"> true</span>。</p>
<p>详细参考 <a href="https://yarnpkg.com/zh-Hans/docs/package-json#toc-flat" target="_blank" rel="noopener">yarn - flat</a><span data-type="color" style="color:rgb(51, 51, 51)"><span data-type="background" style="background-color:rgb(255, 255, 255)">.</span></span>.</p>
<h3 id="resolutions"><a href="#resolutions" class="headerlink" title="resolutions"></a><a name="20npgi"></a>resolutions</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"resolutions"</span>: &#123;</span><br><span class="line">        <span class="attr">"transitive-package-1"</span>: <span class="string">"0.0.29"</span>,</span><br><span class="line">        <span class="attr">"transitive-package-2"</span>: <span class="string">"file:./local-forks/transitive-package-2"</span>,</span><br><span class="line">        <span class="attr">"dependencies-package-1/transitive-package-3"</span>: <span class="string">"^2.1.1"</span></span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>允许你覆盖特定嵌套依赖项的版本。有关完整规范，请参见<a href="https://github.com/yarnpkg/rfcs/blob/master/implemented/0000-selective-versions-resolutions.md" target="_blank" rel="noopener">选择性版本解析 RFC</a>。</p>
<p>详细参考 <a href="https://yarnpkg.com/zh-Hans/docs/package-json#toc-resolutions" target="_blank" rel="noopener">yarn - resolutions</a>.</p>
<h2 id="unpkg-相关字段"><a href="#unpkg-相关字段" class="headerlink" title="unpkg 相关字段"></a><a name="qsrgbn"></a>unpkg 相关字段</h2><p><a href="https://github.com/unpkg/unpkg.com" target="_blank" rel="noopener">unpkg</a>: 让 npm 上所有的文件都开启 cdn 服务。</p>
<p>unpkg</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># jquery</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">"unpkg"</span>: <span class="string">"dist/jquery.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>正常情况下，访问 jquery 的发布文件通过 <a href="https://unpkg.com/jquery@3.3.1/dist/jquery.js%EF%BC%8C%E5%BD%93%E4%BD%A0%E4%BD%BF%E7%94%A8%E7%9C%81%E7%95%A5%E7%9A%84" target="_blank" rel="noopener">https://unpkg.com/jquery@3.3.1/dist/jquery.js，当你使用省略的</a> url <a href="https://unpkg.com/jquery" target="_blank" rel="noopener">https://unpkg.com/jquery</a> 时，便会按照如下的方式获取文件：</p>
<p>[latestVersion] 指最新版本号，pkg 指 package.json</p>
<ul>
<li>定义了 unpkg 属性时</li>
</ul>
<p><a href="https://unpkg.com/jquery@%5BlatestVersion%5D/%5Bpkg.unpkg%5D" target="_blank" rel="noopener">https://unpkg.com/jquery@[latestVersion]/[pkg.unpkg]</a></p>
<ul>
<li>未定义 unpkg 属性时，将回退到 main 属性</li>
</ul>
<p><a href="https://unpkg.com/jquery@%5BlatestVersion%5D/%5Bpkg.main%5D" target="_blank" rel="noopener">https://unpkg.com/jquery@[latestVersion]/[pkg.main]</a><br>详细参考 <a href="https://unpkg.com" target="_blank" rel="noopener">https://unpkg.com</a>.</p>
<h3 id="TypeScript-相关字段"><a href="#TypeScript-相关字段" class="headerlink" title="TypeScript 相关字段"></a><a name="3695ng"></a>TypeScript 相关字段</h3><p>TypeScript: JavaScript 的超集<br>types, typings<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"./lib/main.js"</span>,</span><br><span class="line">    <span class="attr">"types"</span>: <span class="string">"./lib/main.d.ts"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>就像 main 字段一样，定义一个针对 TypeScript 的入口文件。</p>
<p>详细参考 TypeScript documentation.</p>
<h3 id="browserslist-相关字段"><a href="#browserslist-相关字段" class="headerlink" title="browserslist 相关字段"></a><a name="ye8iac"></a>browserslist 相关字段</h3><p>browserslist: 设置项目的浏览器兼容情况。<br>browserslist</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"browserslist"</span>: [</span><br><span class="line"><span class="string">"&gt; 1%"</span>,</span><br><span class="line"><span class="string">"last 2 versions"</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>支持的工具：</p>
<p>Autoprefixer<br>Babel<br>postcss-preset-env<br>eslint-plugin-compat<br>stylelint-no-unsupported-browser-features<br>postcss-normalize<br>详细参考 browserslist.</p>
<h3 id="发行打包相关字段"><a href="#发行打包相关字段" class="headerlink" title="发行打包相关字段"></a><a name="whz6lg"></a>发行打包相关字段</h3><p>点击 Setting up multi-platform npm packages 查看相关介绍。</p>
<h4 id="module"><a href="#module" class="headerlink" title="module"></a><a name="mnamrg"></a>module</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"main"</span>: <span class="string">"./lib/main.js"</span>,</span><br><span class="line"><span class="attr">"module"</span>: <span class="string">"./lib/main.m.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就像 main 字段一样，定义一个针对 es6 模块及语法的入口文件。<br>构建工具在构建项目的时候，如果发现了这个字段，会首先使用这个字段指向的文件，如果未定义，则回退到 main 字段指向的文件。</p>
<p>支持的工具：</p>
<p>rollup<br>webpack<br>详细参考 rollup - pkg.module.</p>
<h4 id="browser"><a href="#browser" class="headerlink" title="browser"></a><a name="5breni"></a>browser</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;main&quot;: &quot;./lib/main.js&quot;,</span><br><span class="line">    &quot;browser&quot;: &quot;./lib/main.b.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指定该模块供浏览器使用的入口文件。<br>如果这个字段未定义，则回退到 main 字段指向的文件。</p>
<p>支持的工具：</p>
<p>rollup<br>webpack<br>browserify<br>详细参考 babel-plugin-module-resolver.</p>
<h4 id="esnext"><a href="#esnext" class="headerlink" title="esnext"></a><a name="zrogwv"></a>esnext</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">&quot;main&quot;: &quot;main.js&quot;,</span><br><span class="line">&quot;esnext&quot;: &quot;main-esnext.js&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id=""><a href="#" class="headerlink" title=""></a><a name="a0k0ck"></a></h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"main.js"</span>,</span><br><span class="line">    <span class="attr">"esnext"</span>: &#123;</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"main-esnext.js"</span>,</span><br><span class="line">    <span class="attr">"browser"</span>: <span class="string">"browser-specific-main-esnext.js"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用 es 模块化规范，stage 4 特性的源代码。<br>详细参考 Transpiling dependencies with Babel, Delivering untranspiled source code via npm.</p>
<h4 id="es2015"><a href="#es2015" class="headerlink" title="es2015"></a><a name="am3pii"></a>es2015</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"main.js"</span>,</span><br><span class="line">    <span class="attr">"es2015"</span>: <span class="string">"main-es2015.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Angular 定义的未转码的 es6 源码。<br>详细参考 <a href="https://docs.google.com/document/d/1CZC2rcpxffTDfRDs6p1cfbmKNLA6x5O-NtkJglDaBVs/edit#" target="_blank" rel="noopener">https://docs.google.com/document/d/1CZC2rcpxffTDfRDs6p1cfbmKNLA6x5O-NtkJglDaBVs/edit#</a>.</p>
<p>esm<br>详细参考 adjusted proposal: ES module “esm”: true package.json flag.</p>
<h3 id="react-native-相关字段"><a href="#react-native-相关字段" class="headerlink" title="react-native 相关字段"></a><a name="b246cd"></a>react-native 相关字段</h3><p>react-native: 使用 react 组件技术写原生APP。</p>
<h4 id="react-native"><a href="#react-native" class="headerlink" title="react-native"></a><a name="64uakc"></a>react-native</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"main"</span>: <span class="string">"./lib/main.js"</span>,</span><br><span class="line">    <span class="attr">"react-native"</span>: <span class="string">"./lib/main.react-native.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指定该模块供 react-native 使用的入口文件。<br>如果这个字段未定义，则回退到 main 字段指向的文件。</p>
<p>源代码查看.</p>
<h3 id="webpack-相关字段"><a href="#webpack-相关字段" class="headerlink" title="webpack 相关字段"></a><a name="564axp"></a>webpack 相关字段</h3><h4 id="sideEffects"><a href="#sideEffects" class="headerlink" title="sideEffects"></a><a name="4y9mgs"></a>sideEffects</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"sideEffects"</span>: <span class="literal">true</span>|<span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>声明该模块是否包含 sideEffects（副作用），从而可以为 tree-shaking 提供更大的优化空间。<br>详细参考 sideEffects example, proposal for marking functions as pure, eslint-plugin-tree-shaking.</p>
<h3 id="microbundle-相关字段"><a href="#microbundle-相关字段" class="headerlink" title="microbundle 相关字段"></a><a name="o47yaz"></a>microbundle 相关字段</h3><p>microbundle: 基于 rollup 零配置快速打包工具。</p>
<h4 id="source"><a href="#source" class="headerlink" title="source"></a><a name="fhklgb"></a>source</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "source"： "src/index.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>源文件入口文件。</p>
<p>详细参考 Specifying builds in package.json.</p>
<h4 id="umd-main"><a href="#umd-main" class="headerlink" title="umd:main"></a><a name="u7pxuy"></a>umd:main</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    "umd:main"： "dist/main.umd.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>umd 模式 bundle 文件。<br>详细参考 Specifying builds in package.json.</p>
<h3 id="parcel-相关字段"><a href="#parcel-相关字段" class="headerlink" title="parcel 相关字段"></a><a name="u1l8gz"></a>parcel 相关字段</h3><p>parcel: 零配置打包工具。</p>
<h4 id="source-1"><a href="#source-1" class="headerlink" title="source"></a><a name="rlq8fb"></a>source</h4><p>查看 parcel-bundler/parcel#1652.</p>
<h3 id="babel-相关字段"><a href="#babel-相关字段" class="headerlink" title="babel 相关字段"></a><a name="35meyo"></a>babel 相关字段</h3><p>babel: es6 -&gt; es5 转码器。</p>
<h4 id="babel"><a href="#babel" class="headerlink" title="babel"></a><a name="20pork"></a>babel</h4><p>配置 babel。</p>
<h3 id="eslint-相关字段"><a href="#eslint-相关字段" class="headerlink" title="eslint 相关字段"></a><a name="mfygqs"></a>eslint 相关字段</h3><p>eslint: js 代码检查与优化。</p>
<h4 id="eslintConfig"><a href="#eslintConfig" class="headerlink" title="eslintConfig"></a><a name="kce7en"></a>eslintConfig</h4><p>配置 eslint。</p>
<h3 id="jest-相关字段"><a href="#jest-相关字段" class="headerlink" title="jest 相关字段"></a><a name="pk7gyw"></a>jest 相关字段</h3><p>jest: js 测试库。</p>
<h4 id="jest"><a href="#jest" class="headerlink" title="jest"></a><a name="riftrg"></a>jest</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"jest"</span>: &#123;</span><br><span class="line">        <span class="attr">"verbose"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置 jest。<br>详细参考 jest docs.</p>
<h3 id="stylelint-相关字段"><a href="#stylelint-相关字段" class="headerlink" title="stylelint 相关字段"></a><a name="egpgug"></a>stylelint 相关字段</h3><p>stylelint: style 代码检查与优化。</p>
<p>stylelint<br>配置 stylelint。</p>
<p>详细参考 New configuration loader.</p>
<h3 id="ava-相关字段"><a href="#ava-相关字段" class="headerlink" title="ava 相关字段"></a><a name="xyregs"></a>ava 相关字段</h3><p>ava: js 测试库。</p>
<h4 id="ava"><a href="#ava" class="headerlink" title="ava"></a><a name="zhmvin"></a>ava</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"ava"</span>: &#123;</span><br><span class="line">        <span class="attr">"require"</span>: [ <span class="string">"@std/esm"</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置 ava。<br>详细参考 ava configuration.</p>
<h2 id="nyc-相关字段"><a href="#nyc-相关字段" class="headerlink" title="nyc 相关字段"></a><a name="g0c1qs"></a>nyc 相关字段</h2><p>nyc: istanbul.js 命令行。</p>
<h4 id="nyc"><a href="#nyc" class="headerlink" title="nyc"></a><a name="8usxxg"></a>nyc</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"nyc"</span>: &#123;</span><br><span class="line">    <span class="attr">"extension"</span>: [<span class="string">".js"</span>, <span class="string">".mjs"</span>],</span><br><span class="line">    <span class="attr">"require"</span>: [<span class="string">"@std/esm"</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置 nyc。<br>详细参考 nyc docs.</p>
<h3 id="CommonJS-保留字段"><a href="#CommonJS-保留字段" class="headerlink" title="CommonJS 保留字段"></a><a name="gpgstu"></a>CommonJS 保留字段</h3><p>保留字段: build, default, email, external, files, imports, maintainer, paths, platform, require, summary, test, using, downloads, uid.</p>
<p>不可用字段: id, type, 以 _ 和 \$ 开头的字段。</p>
<h3 id="Standard-JS-相关字段"><a href="#Standard-JS-相关字段" class="headerlink" title="Standard JS 相关字段"></a><a name="zfqxzx"></a>Standard JS 相关字段</h3><p>Standard JS: js 代码检查与优化。</p>
<h4 id="standard"><a href="#standard" class="headerlink" title="standard"></a><a name="coslfu"></a>standard</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"standard"</span>: &#123;</span><br><span class="line">    <span class="attr">"parser"</span>: <span class="string">"babel-eslint"</span>,</span><br><span class="line">    <span class="attr">"ignore"</span>: [</span><br><span class="line">        <span class="string">"**/out/"</span>,</span><br><span class="line">        <span class="string">"/lib/select2/"</span>,</span><br><span class="line">        <span class="string">"/lib/ckeditor/"</span>,</span><br><span class="line">        <span class="string">"tmp.js"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>配置 standard.<br>详细参考 <a href="https://standardjs.com/" target="_blank" rel="noopener">https://standardjs.com/</a>.</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a><a name="g6y6oo"></a>其他</h3><p>style<br>声明当前模块包含 style 部分，并指定入口文件。</p>
<p>支持的工具：</p>
<p>parcelify<br>npm-less<br>rework-npm<br>npm-css<br>详细参考 Package.json “style” Attribute, istf-spec.</p>
<h4 id="less"><a href="#less" class="headerlink" title="less"></a><a name="5b4czw"></a>less</h4><p>与 style 一样，但是是 less 文件。</p>
<p>支持的工具：</p>
<p>npm-less</p>
<h3 id="更多"><a href="#更多" class="headerlink" title="更多"></a><a name="3l8zck"></a>更多</h3><p>参考 <a href="https://github.com/stereobooster/package.json" target="_blank" rel="noopener">package.json fields explained</a></p>
<h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a><a name="4ylufx"></a>参考资源</h2><p><a href="https://segmentfault.com/a/1190000016365409#articleHeader39" target="_blank" rel="noopener">package.json 非官方字段集合</a><br>官方字段文档：<a href="https://docs.npmjs.com/files/package.json" target="_blank" rel="noopener">https://docs.npmjs.com/files/package.json</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/前端工程化/" class="article-tag-list-link color1">前端工程化</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/17/package.json 的解读/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
    <article id="post-Dbox 内部开源组件背后的故事" class="article article-type-post  article-index" itemscope="" itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/13/Dbox 内部开源组件背后的故事/">Dbox 内部开源组件背后的故事</a>
    </h1>
  

        
        <a href="/2018/12/13/Dbox 内部开源组件背后的故事/" class="archive-article-date">
  	<time datetime="2018-12-13T07:22:56.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2018-12-13</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a><a name="n9b0dy"></a>前言</h1><h2 id="已有组件-OR-自造组件？？？"><a href="#已有组件-OR-自造组件？？？" class="headerlink" title="已有组件 OR 自造组件？？？"></a><a name="aib0uh"></a><strong>已有组件</strong> OR <strong>自造组件？？？</strong></h2><p><span data-type="color" style="color:rgb(38, 38, 38)"><span data-type="background" style="background-color:rgb(255, 255, 255)">基础和灵活 VS 定制化和效率</span></span><br>
        
          <a class="article-more-a" href="/2018/12/13/Dbox 内部开源组件背后的故事/#more">more >></a>
        
      

      
    </p></div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">组件</a>
        		</li>
      		
		</ul>
	</div>

      
	<div class="article-category tagcloud">
		<i class="icon-book icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="/categories/业务场景解决方案/" class="article-tag-list-link color4">业务场景解决方案</a>
        		</li>
      		
		</ul>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2018/12/13/Dbox 内部开源组件背后的故事/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/3/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 代码风情
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true,
		showTags: true
	}
</script>

<script>!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var e={};return n.m=t,n.c=e,n.p="./",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){var e=/\/|index.html/g;return t.replace(e,"")===n.replace(e,"")}function i(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,e=0,r=t.length;e<r;e++){var i=t[e];o(n,i.getAttribute("href"))&&(0,d.default)(i,"active")}}function u(t){for(var n=t.offsetLeft,e=t.offsetParent;null!==e;)n+=e.offsetLeft,e=e.offsetParent;return n}function f(t){for(var n=t.offsetTop,e=t.offsetParent;null!==e;)n+=e.offsetTop,e=e.offsetParent;return n}function c(t,n,e,r,o){var i=u(t),c=f(t)-n;if(c-e<=o){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,h.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(e||c)+"px",a.style.left=i+"px",a.style.zIndex=r||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");c(t,document.body.scrollTop,-63,2,0),c(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}function l(){x.default.versions.mobile&&window.screen.width<800&&(i(),s())}var p=e(71),d=r(p),v=e(72),y=(r(v),e(84)),h=r(y),b=e(69),x=r(b),m=e(75),g=r(m),w=e(70);l(),(0,w.addLoadEvent)(function(){g.default.init()}),t.exports={}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(49),o=e(15);t.exports=function(t){return r(o(t))}},function(t,n,e){t.exports=!e(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,e){var r=e(6),o=e(12);t.exports=e(4)?function(t,n,e){return r.f(t,n,o(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(10),o=e(30),i=e(24),u=Object.defineProperty;n.f=e(4)?Object.defineProperty:function(t,n,e){if(r(t),n=i(n,!0),r(e),o)try{return u(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(22)("wks"),o=e(13),i=e(1).Symbol,u="function"==typeof i,f=t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))};f.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(35),o=e(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,n,e){var r=e(11);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n){var e=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=e)},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(6).f,o=e(2),i=e(7)("toStringTag");t.exports=function(t,n,e){t&&!o(t=e?t:t.prototype,i)&&r(t,i,{configurable:!0,value:n})}},function(t,n,e){var r=e(22)("keys"),o=e(13);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,n,e){var r=e(1),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(11);t.exports=function(t,n){if(!r(t))return t;var e,o;if(n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;if("function"==typeof(e=t.valueOf)&&!r(o=e.call(t)))return o;if(!n&&"function"==typeof(e=t.toString)&&!r(o=e.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){var r=e(1),o=e(14),i=e(18),u=e(26),f=e(6).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||f(n,t,{value:u.f(t)})}},function(t,n,e){n.f=e(7)},function(t,n,e){var r=e(1),o=e(14),i=e(46),u=e(5),f="prototype",c=function(t,n,e){var a,s,l,p=t&c.F,d=t&c.G,v=t&c.S,y=t&c.P,h=t&c.B,b=t&c.W,x=d?o:o[n]||(o[n]={}),m=x[f],g=d?r:v?r[n]:(r[n]||{})[f];d&&(e=n);for(a in e)s=!p&&g&&void 0!==g[a],s&&a in x||(l=s?g[a]:e[a],x[a]=d&&"function"!=typeof g[a]?e[a]:h&&s?i(l,r):b&&g[a]==l?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[f]=t[f],n}(l):y&&"function"==typeof l?i(Function.call,l):l,y&&((x.virtual||(x.virtual={}))[a]=l,t&c.R&&m&&!m[a]&&u(m,a,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n,e){var r=e(11),o=e(1).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,e){t.exports=!e(4)&&!e(8)(function(){return 7!=Object.defineProperty(e(29)("div"),"a",{get:function(){return 7}}).a})},function(t,n,e){"use strict";var r=e(18),o=e(27),i=e(36),u=e(5),f=e(2),c=e(17),a=e(51),s=e(20),l=e(58),p=e(7)("iterator"),d=!([].keys&&"next"in[].keys()),v="@@iterator",y="keys",h="values",b=function(){return this};t.exports=function(t,n,e,x,m,g,w){a(e,n,x);var O,S,_,j=function(t){if(!d&&t in A)return A[t];switch(t){case y:return function(){return new e(this,t)};case h:return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",E=m==h,M=!1,A=t.prototype,T=A[p]||A[v]||m&&A[m],L=T||j(m),N=m?E?j("entries"):L:void 0,C="Array"==n?A.entries||T:T;if(C&&(_=l(C.call(new t)),_!==Object.prototype&&(s(_,P,!0),r||f(_,p)||u(_,p,b))),E&&T&&T.name!==h&&(M=!0,L=function(){return T.call(this)}),r&&!w||!d&&!M&&A[p]||u(A,p,L),c[n]=L,c[P]=b,m)if(O={values:E?L:j(h),keys:g?L:j(y),entries:N},w)for(S in O)S in A||i(A,S,O[S]);else o(o.P+o.F*(d||M),n,O);return O}},function(t,n,e){var r=e(10),o=e(55),i=e(16),u=e(21)("IE_PROTO"),f=function(){},c="prototype",a=function(){var t,n=e(29)("iframe"),r=i.length,o="<",u=">";for(n.style.display="none",e(48).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+u+"document.F=Object"+o+"/script"+u),t.close(),a=t.F;r--;)delete a[c][i[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f[c]=r(t),e=new f,f[c]=null,e[u]=t):e=a(),void 0===n?e:o(e,n)}},function(t,n,e){var r=e(35),o=e(16).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){var r=e(2),o=e(3),i=e(45)(!1),u=e(21)("IE_PROTO");t.exports=function(t,n){var e,f=o(t),c=0,a=[];for(e in f)e!=u&&r(f,e)&&a.push(e);for(;n.length>c;)r(f,e=n[c++])&&(~i(a,e)||a.push(e));return a}},function(t,n,e){t.exports=e(5)},function(t,n,e){var r=e(15);t.exports=function(t){return Object(r(t))}},function(t,n,e){t.exports={default:e(41),__esModule:!0}},function(t,n,e){t.exports={default:e(42),__esModule:!0}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var o=e(39),i=r(o),u=e(38),f=r(u),c="function"==typeof f.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":typeof t};n.default="function"==typeof f.default&&"symbol"===c(i.default)?function(t){return"undefined"==typeof t?"undefined":c(t)}:function(t){return t&&"function"==typeof f.default&&t.constructor===f.default&&t!==f.default.prototype?"symbol":"undefined"==typeof t?"undefined":c(t)}},function(t,n,e){e(65),e(63),e(66),e(67),t.exports=e(14).Symbol},function(t,n,e){e(64),e(68),t.exports=e(26).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,e){var r=e(3),o=e(61),i=e(60);t.exports=function(t){return function(n,e,u){var f,c=r(n),a=o(c.length),s=i(u,a);if(t&&e!=e){for(;a>s;)if(f=c[s++],f!=f)return!0}else for(;a>s;s++)if((t||s in c)&&c[s]===e)return t||s||0;return!t&&-1}}},function(t,n,e){var r=e(43);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(9),o=e(34),i=e(19);t.exports=function(t){var n=r(t),e=o.f;if(e)for(var u,f=e(t),c=i.f,a=0;f.length>a;)c.call(t,u=f[a++])&&n.push(u);return n}},function(t,n,e){t.exports=e(1).document&&document.documentElement},function(t,n,e){var r=e(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){"use strict";var r=e(32),o=e(12),i=e(20),u={};e(5)(u,e(7)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(u,{next:o(1,e)}),i(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,e){var r=e(9),o=e(3);t.exports=function(t,n){for(var e,i=o(t),u=r(i),f=u.length,c=0;f>c;)if(i[e=u[c++]]===n)return e}},function(t,n,e){var r=e(13)("meta"),o=e(11),i=e(2),u=e(6).f,f=0,c=Object.isExtensible||function(){return!0},a=!e(8)(function(){return c(Object.preventExtensions({}))}),s=function(t){u(t,r,{value:{i:"O"+ ++f,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!c(t))return"F";if(!n)return"E";s(t)}return t[r].i},p=function(t,n){if(!i(t,r)){if(!c(t))return!0;if(!n)return!1;s(t)}return t[r].w},d=function(t){return a&&v.NEED&&c(t)&&!i(t,r)&&s(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:p,onFreeze:d}},function(t,n,e){var r=e(6),o=e(10),i=e(9);t.exports=e(4)?Object.defineProperties:function(t,n){o(t);for(var e,u=i(n),f=u.length,c=0;f>c;)r.f(t,e=u[c++],n[e]);return t}},function(t,n,e){var r=e(19),o=e(12),i=e(3),u=e(24),f=e(2),c=e(30),a=Object.getOwnPropertyDescriptor;n.f=e(4)?a:function(t,n){if(t=i(t),n=u(n,!0),c)try{return a(t,n)}catch(t){}if(f(t,n))return o(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),o=e(33).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],f=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?f(t):o(r(t))}},function(t,n,e){var r=e(2),o=e(37),i=e(21)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,e){var r=e(23),o=e(15);t.exports=function(t){return function(n,e){var i,u,f=String(o(n)),c=r(e),a=f.length;return c<0||c>=a?t?"":void 0:(i=f.charCodeAt(c),i<55296||i>56319||c+1===a||(u=f.charCodeAt(c+1))<56320||u>57343?t?f.charAt(c):i:t?f.slice(c,c+2):(i-55296<<10)+(u-56320)+65536)}}},function(t,n,e){var r=e(23),o=Math.max,i=Math.min;t.exports=function(t,n){return t=r(t),t<0?o(t+n,0):i(t,n)}},function(t,n,e){var r=e(23),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,n,e){"use strict";var r=e(44),o=e(52),i=e(17),u=e(3);t.exports=e(31)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,o(1)):"keys"==n?o(0,e):"values"==n?o(0,t[e]):o(0,[e,t[e]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,n){},function(t,n,e){"use strict";var r=e(59)(!0);e(31)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=r(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,e){"use strict";var r=e(1),o=e(2),i=e(4),u=e(27),f=e(36),c=e(54).KEY,a=e(8),s=e(22),l=e(20),p=e(13),d=e(7),v=e(26),y=e(25),h=e(53),b=e(47),x=e(50),m=e(10),g=e(3),w=e(24),O=e(12),S=e(32),_=e(57),j=e(56),P=e(6),E=e(9),M=j.f,A=P.f,T=_.f,L=r.Symbol,N=r.JSON,C=N&&N.stringify,k="prototype",F=d("_hidden"),q=d("toPrimitive"),I={}.propertyIsEnumerable,B=s("symbol-registry"),D=s("symbols"),W=s("op-symbols"),H=Object[k],K="function"==typeof L,R=r.QObject,J=!R||!R[k]||!R[k].findChild,U=i&&a(function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=M(H,n);r&&delete H[n],A(t,n,e),r&&t!==H&&A(H,n,r)}:A,G=function(t){var n=D[t]=S(L[k]);return n._k=t,n},$=K&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},z=function(t,n,e){return t===H&&z(W,n,e),m(t),n=w(n,!0),m(e),o(D,n)?(e.enumerable?(o(t,F)&&t[F][n]&&(t[F][n]=!1),e=S(e,{enumerable:O(0,!1)})):(o(t,F)||A(t,F,O(1,{})),t[F][n]=!0),U(t,n,e)):A(t,n,e)},Y=function(t,n){m(t);for(var e,r=b(n=g(n)),o=0,i=r.length;i>o;)z(t,e=r[o++],n[e]);return t},Q=function(t,n){return void 0===n?S(t):Y(S(t),n)},X=function(t){var n=I.call(this,t=w(t,!0));return!(this===H&&o(D,t)&&!o(W,t))&&(!(n||!o(this,t)||!o(D,t)||o(this,F)&&this[F][t])||n)},V=function(t,n){if(t=g(t),n=w(n,!0),t!==H||!o(D,n)||o(W,n)){var e=M(t,n);return!e||!o(D,n)||o(t,F)&&t[F][n]||(e.enumerable=!0),e}},Z=function(t){for(var n,e=T(g(t)),r=[],i=0;e.length>i;)o(D,n=e[i++])||n==F||n==c||r.push(n);return r},tt=function(t){for(var n,e=t===H,r=T(e?W:g(t)),i=[],u=0;r.length>u;)!o(D,n=r[u++])||e&&!o(H,n)||i.push(D[n]);return i};K||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),n=function(e){this===H&&n.call(W,e),o(this,F)&&o(this[F],t)&&(this[F][t]=!1),U(this,t,O(1,e))};return i&&J&&U(H,t,{configurable:!0,set:n}),G(t)},f(L[k],"toString",function(){return this._k}),j.f=V,P.f=z,e(33).f=_.f=Z,e(19).f=X,e(34).f=tt,i&&!e(18)&&f(H,"propertyIsEnumerable",X,!0),v.f=function(t){return G(d(t))}),u(u.G+u.W+u.F*!K,{Symbol:L});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;nt.length>et;)d(nt[et++]);for(var nt=E(d.store),et=0;nt.length>et;)y(nt[et++]);u(u.S+u.F*!K,"Symbol",{for:function(t){return o(B,t+="")?B[t]:B[t]=L(t)},keyFor:function(t){if($(t))return h(B,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){J=!0},useSimple:function(){J=!1}}),u(u.S+u.F*!K,"Object",{create:Q,defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),N&&u(u.S+u.F*(!K||a(function(){var t=L();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!$(t)){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return n=r[1],"function"==typeof n&&(e=n),!e&&x(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!$(n))return n}),r[1]=n,C.apply(N,r)}}}),L[k][q]||e(5)(L[k],q,L[k].valueOf),l(L,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){e(25)("asyncIterator")},function(t,n,e){e(25)("observable")},function(t,n,e){e(62);for(var r=e(1),o=e(5),i=e(17),u=e(7)("toStringTag"),f=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var a=f[c],s=r[a],l=s&&s.prototype;l&&!l[u]&&o(l,u,a),i[a]=i.Array}},function(t,n){"use strict";var e={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&t.indexOf("KHTML")==-1,mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:t.indexOf("Safari")==-1,weixin:t.indexOf("MicroMessenger")==-1}}()};t.exports=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=e(40),i=r(o),u=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):o[t]||t}function n(t){return l[t]}var e=/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,r=/['<> "&]/g,o={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},f=/\u00a0/g,c=/<br\s*\/?>/gi,a=/\r?\n/g,s=/\s/g,l={};for(var p in o)l[o[p]]=p;return o["&apos;"]="'",l["'"]="&#39;",{encode:function(t){return t?(""+t).replace(r,n).replace(a,"<br/>").replace(s,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(c,"\n").replace(e,t).replace(f," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],e=0,r=t.length;r>e;e++)n.push(t.charCodeAt(e).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],e=0,r=t.length;r>e;e+=2)n.push(String.fromCharCode("0x"+t.slice(e,e+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,e=t.length;e>n;n++)t[n]=u.encodeObject(t[n]);else if("object"==("undefined"==typeof t?"undefined":(0,i.default)(t)))for(var r in t)t[r]=u.encodeObject(t[r]);else if("string"==typeof t)return u.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=u},function(t,n){function e(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=e},function(t,n){function e(t,n){if(t.classList)t.classList.remove(n);else{var e=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(e," ")}}t.exports=e},,,function(t,n){"use strict";function e(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){var n=document.querySelectorAll(".article-entry a:not(.article-more-a)");n.forEach(function(t){t.setAttribute("target","_blank")})}var e=document.querySelector("#js-aboutme");e&&0!==e.length&&(e.innerHTML=e.innerText)}t.exports={init:e}},,,,,,,,,function(t,n){function e(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var e=t.nextSibling;return e?t.parentNode.insertBefore(n,e):t.parentNode.appendChild(n)}t.exports=e}])</script><script src="/./main.2d7529.js"></script><script>!function(){var e=function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)};e("/slider.885efe.js")}()</script>



<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
<div id="totop" style="position:fixed;bottom:50px;right:30px;cursor: pointer;z-index:9999;opacity: 100%;">
<a title="返回顶部" style="opacity: 100%;><img src=" img="" scrollup.png"=""></a>
</div>
<script src="/totop.js"></script>
    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">搜索</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">作品及资源</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">组件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">movie</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">其他</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">资源</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br> npm i hexo-generator-json-content --save<br><br>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="https://github.com/Betterhub/vuebi" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>RN 脚手架</a>
            </li>
          
            <li class="search-li">
              <a href="https://github.com/lulu27753/Frontend-Book" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>前端电子书</a>
            </li>
          
            <li class="search-li">
              <a href="http://www.lulustyle.net/100du/100.html" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>门户网站</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>Dbox-UI</a>
            </li>
          
            <li class="search-li">
              <a href="https://www.npmjs.com/package/idoll-pro" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>基于React的中台脚手架</a>
            </li>
          
            <li class="search-li">
              <a href="http://www.lulustyle.net/shanbeiBbs/bbs.html" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>记单词网站</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">个人主攻 Web 前端 React 开发，5年+工作经验，1年团队管理经验，有过angular、vue、node 的开发经验，经历过前后端分离，熟悉大前端BFF架构。参与或独立开发过多个核心项目，项目类型涉及：医疗器械、教育服务、企业管理、SPA 应用（PC/Moblie）等等；</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>